/*! For license information please see manifesto.js.LICENSE.txt */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("node-fetch")):"function"==typeof define&&define.amd?define("manifesto",["node-fetch"],n):"object"==typeof exports?exports.manifesto=n(require("node-fetch")):e.manifesto=n(e["node-fetch"])}("undefined"!=typeof self?self:this,(__WEBPACK_EXTERNAL_MODULE_node_fetch__=>(()=>{var __webpack_modules__={"./node_modules/@edsilv/http-status-codes/dist-commonjs/index.js":(__unused_webpack_module,exports)=>{"use strict";eval('\r\nObject.defineProperty(exports, "__esModule", ({ value: true }));\r\nexports.CONTINUE = 100;\r\nexports.SWITCHING_PROTOCOLS = 101;\r\nexports.PROCESSING = 102;\r\nexports.OK = 200;\r\nexports.CREATED = 201;\r\nexports.ACCEPTED = 202;\r\nexports.NON_AUTHORITATIVE_INFORMATION = 203;\r\nexports.NO_CONTENT = 204;\r\nexports.RESET_CONTENT = 205;\r\nexports.PARTIAL_CONTENT = 206;\r\nexports.MULTI_STATUS = 207;\r\nexports.MULTIPLE_CHOICES = 300;\r\nexports.MOVED_PERMANENTLY = 301;\r\nexports.MOVED_TEMPORARILY = 302;\r\nexports.SEE_OTHER = 303;\r\nexports.NOT_MODIFIED = 304;\r\nexports.USE_PROXY = 305;\r\nexports.TEMPORARY_REDIRECT = 307;\r\nexports.BAD_REQUEST = 400;\r\nexports.UNAUTHORIZED = 401;\r\nexports.PAYMENT_REQUIRED = 402;\r\nexports.FORBIDDEN = 403;\r\nexports.NOT_FOUND = 404;\r\nexports.METHOD_NOT_ALLOWED = 405;\r\nexports.NOT_ACCEPTABLE = 406;\r\nexports.PROXY_AUTHENTICATION_REQUIRED = 407;\r\nexports.REQUEST_TIME_OUT = 408;\r\nexports.CONFLICT = 409;\r\nexports.GONE = 410;\r\nexports.LENGTH_REQUIRED = 411;\r\nexports.PRECONDITION_FAILED = 412;\r\nexports.REQUEST_ENTITY_TOO_LARGE = 413;\r\nexports.REQUEST_URI_TOO_LARGE = 414;\r\nexports.UNSUPPORTED_MEDIA_TYPE = 415;\r\nexports.REQUESTED_RANGE_NOT_SATISFIABLE = 416;\r\nexports.EXPECTATION_FAILED = 417;\r\nexports.IM_A_TEAPOT = 418;\r\nexports.UNPROCESSABLE_ENTITY = 422;\r\nexports.LOCKED = 423;\r\nexports.FAILED_DEPENDENCY = 424;\r\nexports.UNORDERED_COLLECTION = 425;\r\nexports.UPGRADE_REQUIRED = 426;\r\nexports.PRECONDITION_REQUIRED = 428;\r\nexports.TOO_MANY_REQUESTS = 429;\r\nexports.REQUEST_HEADER_FIELDS_TOO_LARGE = 431;\r\nexports.INTERNAL_SERVER_ERROR = 500;\r\nexports.NOT_IMPLEMENTED = 501;\r\nexports.BAD_GATEWAY = 502;\r\nexports.SERVICE_UNAVAILABLE = 503;\r\nexports.GATEWAY_TIME_OUT = 504;\r\nexports.HTTP_VERSION_NOT_SUPPORTED = 505;\r\nexports.VARIANT_ALSO_NEGOTIATES = 506;\r\nexports.INSUFFICIENT_STORAGE = 507;\r\nexports.BANDWIDTH_LIMIT_EXCEEDED = 509;\r\nexports.NOT_EXTENDED = 510;\r\nexports.NETWORK_AUTHENTICATION_REQUIRED = 511;\r\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://manifesto/./node_modules/@edsilv/http-status-codes/dist-commonjs/index.js?')},"./node_modules/@iiif/vocabulary/dist-commonjs/index.js":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nvar AnnotationMotivation;\n(function (AnnotationMotivation) {\n    AnnotationMotivation["BOOKMARKING"] = "oa:bookmarking";\n    AnnotationMotivation["CLASSIFYING"] = "oa:classifying";\n    AnnotationMotivation["COMMENTING"] = "oa:commenting";\n    AnnotationMotivation["DESCRIBING"] = "oa:describing";\n    AnnotationMotivation["EDITING"] = "oa:editing";\n    AnnotationMotivation["HIGHLIGHTING"] = "oa:highlighting";\n    AnnotationMotivation["IDENTIFYING"] = "oa:identifying";\n    AnnotationMotivation["LINKING"] = "oa:linking";\n    AnnotationMotivation["MODERATING"] = "oa:moderating";\n    AnnotationMotivation["PAINTING"] = "sc:painting";\n    AnnotationMotivation["QUESTIONING"] = "oa:questioning";\n    AnnotationMotivation["REPLYING"] = "oa:replying";\n    AnnotationMotivation["TAGGING"] = "oa:tagging";\n    AnnotationMotivation["TRANSCRIBING"] = "oad:transcribing";\n})(AnnotationMotivation = exports.AnnotationMotivation || (exports.AnnotationMotivation = {}));\nvar Behavior;\n(function (Behavior) {\n    Behavior["AUTO_ADVANCE"] = "auto-advance";\n    Behavior["CONTINUOUS"] = "continuous";\n    Behavior["FACING_PAGES"] = "facing-pages";\n    Behavior["HIDDEN"] = "hidden";\n    Behavior["INDIVIDUALS"] = "individuals";\n    Behavior["MULTI_PART"] = "multi-part";\n    Behavior["NO_NAV"] = "no-nav";\n    Behavior["NON_PAGED"] = "non-paged";\n    Behavior["PAGED"] = "paged";\n    Behavior["REPEAT"] = "repeat";\n    Behavior["SEQUENCE"] = "sequence";\n    Behavior["THUMBNAIL_NAV"] = "thumbnail-nav";\n    Behavior["TOGETHER"] = "together";\n    Behavior["UNORDERED"] = "unordered";\n})(Behavior = exports.Behavior || (exports.Behavior = {}));\nvar ExternalResourceType;\n(function (ExternalResourceType) {\n    ExternalResourceType["CANVAS"] = "canvas";\n    ExternalResourceType["CHOICE"] = "choice";\n    ExternalResourceType["OA_CHOICE"] = "oa:choice";\n    ExternalResourceType["CONTENT_AS_TEXT"] = "contentastext";\n    ExternalResourceType["DATASET"] = "dataset";\n    ExternalResourceType["DOCUMENT"] = "document";\n    ExternalResourceType["IMAGE"] = "image";\n    ExternalResourceType["MODEL"] = "model";\n    ExternalResourceType["MOVING_IMAGE"] = "movingimage";\n    ExternalResourceType["PDF"] = "pdf";\n    ExternalResourceType["PHYSICAL_OBJECT"] = "physicalobject";\n    ExternalResourceType["SOUND"] = "sound";\n    ExternalResourceType["TEXT"] = "text";\n    ExternalResourceType["TEXTUALBODY"] = "textualbody";\n    ExternalResourceType["VIDEO"] = "video";\n})(ExternalResourceType = exports.ExternalResourceType || (exports.ExternalResourceType = {}));\nvar IIIFResourceType;\n(function (IIIFResourceType) {\n    IIIFResourceType["ANNOTATION"] = "annotation";\n    IIIFResourceType["CANVAS"] = "canvas";\n    IIIFResourceType["COLLECTION"] = "collection";\n    IIIFResourceType["MANIFEST"] = "manifest";\n    IIIFResourceType["RANGE"] = "range";\n    IIIFResourceType["SEQUENCE"] = "sequence";\n})(IIIFResourceType = exports.IIIFResourceType || (exports.IIIFResourceType = {}));\nvar MediaType;\n(function (MediaType) {\n    MediaType["AUDIO_MP4"] = "audio/mp4";\n    MediaType["CORTO"] = "application/corto";\n    MediaType["DICOM"] = "application/dicom";\n    MediaType["DRACO"] = "application/draco";\n    MediaType["EPUB"] = "application/epub+zip";\n    MediaType["GIRDER"] = "image/vnd.kitware.girder";\n    MediaType["GLB"] = "model/gltf-binary";\n    MediaType["GLTF"] = "model/gltf+json";\n    MediaType["IIIF_PRESENTATION_2"] = "application/ld+json;profile=\\"http://iiif.io/api/presentation/2/context.json\\"";\n    MediaType["IIIF_PRESENTATION_3"] = "application/ld+json;profile=\\"http://iiif.io/api/presentation/3/context.json\\"";\n    MediaType["JPG"] = "image/jpeg";\n    MediaType["M3U8"] = "application/vnd.apple.mpegurl";\n    MediaType["MP3"] = "audio/mp3";\n    MediaType["MPEG_DASH"] = "application/dash+xml";\n    MediaType["OBJ"] = "text/plain";\n    MediaType["OPF"] = "application/oebps-package+xml";\n    MediaType["PDF"] = "application/pdf";\n    MediaType["PLY"] = "application/ply";\n    MediaType["THREEJS"] = "application/vnd.threejs+json";\n    MediaType["USDZ"] = "model/vnd.usd+zip";\n    MediaType["VIDEO_MP4"] = "video/mp4";\n    MediaType["WAV"] = "audio/wav";\n    MediaType["WEBM"] = "video/webm";\n})(MediaType = exports.MediaType || (exports.MediaType = {}));\nvar RenderingFormat;\n(function (RenderingFormat) {\n    RenderingFormat["DOC"] = "application/msword";\n    RenderingFormat["DOCX"] = "application/vnd.openxmlformats-officedocument.wordprocessingml.document";\n    RenderingFormat["PDF"] = "application/pdf";\n})(RenderingFormat = exports.RenderingFormat || (exports.RenderingFormat = {}));\nvar ServiceProfile;\n(function (ServiceProfile) {\n    // image api\n    ServiceProfile["IMAGE_0_COMPLIANCE_LEVEL_0"] = "http://library.stanford.edu/iiif/image-api/compliance.html#level0";\n    ServiceProfile["IMAGE_0_COMPLIANCE_LEVEL_1"] = "http://library.stanford.edu/iiif/image-api/compliance.html#level1";\n    ServiceProfile["IMAGE_0_COMPLIANCE_LEVEL_2"] = "http://library.stanford.edu/iiif/image-api/compliance.html#level2";\n    ServiceProfile["IMAGE_0_CONFORMANCE_LEVEL_0"] = "http://library.stanford.edu/iiif/image-api/conformance.html#level0";\n    ServiceProfile["IMAGE_0_CONFORMANCE_LEVEL_1"] = "http://library.stanford.edu/iiif/image-api/conformance.html#level1";\n    ServiceProfile["IMAGE_0_CONFORMANCE_LEVEL_2"] = "http://library.stanford.edu/iiif/image-api/conformance.html#level2";\n    ServiceProfile["IMAGE_1_COMPLIANCE_LEVEL_0"] = "http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level0";\n    ServiceProfile["IMAGE_1_COMPLIANCE_LEVEL_1"] = "http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level1";\n    ServiceProfile["IMAGE_1_COMPLIANCE_LEVEL_2"] = "http://library.stanford.edu/iiif/image-api/1.1/compliance.html#level2";\n    ServiceProfile["IMAGE_1_CONFORMANCE_LEVEL_0"] = "http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level0";\n    ServiceProfile["IMAGE_1_CONFORMANCE_LEVEL_1"] = "http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level1";\n    ServiceProfile["IMAGE_1_CONFORMANCE_LEVEL_2"] = "http://library.stanford.edu/iiif/image-api/1.1/conformance.html#level2";\n    ServiceProfile["IMAGE_1_LEVEL_0"] = "http://iiif.io/api/image/1/level0.json";\n    ServiceProfile["IMAGE_1_PROFILE_LEVEL_0"] = "http://iiif.io/api/image/1/profiles/level0.json";\n    ServiceProfile["IMAGE_1_LEVEL_1"] = "http://iiif.io/api/image/1/level1.json";\n    ServiceProfile["IMAGE_1_PROFILE_LEVEL_1"] = "http://iiif.io/api/image/1/profiles/level1.json";\n    ServiceProfile["IMAGE_1_LEVEL_2"] = "http://iiif.io/api/image/1/level2.json";\n    ServiceProfile["IMAGE_1_PROFILE_LEVEL_2"] = "http://iiif.io/api/image/1/profiles/level2.json";\n    ServiceProfile["IMAGE_2_LEVEL_0"] = "http://iiif.io/api/image/2/level0.json";\n    ServiceProfile["IMAGE_2_PROFILE_LEVEL_0"] = "http://iiif.io/api/image/2/profiles/level0.json";\n    ServiceProfile["IMAGE_2_LEVEL_1"] = "http://iiif.io/api/image/2/level1.json";\n    ServiceProfile["IMAGE_2_PROFILE_LEVEL_1"] = "http://iiif.io/api/image/2/profiles/level1.json";\n    ServiceProfile["IMAGE_2_LEVEL_2"] = "http://iiif.io/api/image/2/level2.json";\n    ServiceProfile["IMAGE_2_PROFILE_LEVEL_2"] = "http://iiif.io/api/image/2/profiles/level2.json";\n    // auth api\n    ServiceProfile["AUTH_0_CLICK_THROUGH"] = "http://iiif.io/api/auth/0/login/clickthrough";\n    ServiceProfile["AUTH_0_LOGIN"] = "http://iiif.io/api/auth/0/login";\n    ServiceProfile["AUTH_0_LOGOUT"] = "http://iiif.io/api/auth/0/logout";\n    ServiceProfile["AUTH_0_RESTRICTED"] = "http://iiif.io/api/auth/0/login/restricted";\n    ServiceProfile["AUTH_0_TOKEN"] = "http://iiif.io/api/auth/0/token";\n    ServiceProfile["AUTH_1_CLICK_THROUGH"] = "http://iiif.io/api/auth/1/clickthrough";\n    ServiceProfile["AUTH_1_EXTERNAL"] = "http://iiif.io/api/auth/1/external";\n    ServiceProfile["AUTH_1_KIOSK"] = "http://iiif.io/api/auth/1/kiosk";\n    ServiceProfile["AUTH_1_LOGIN"] = "http://iiif.io/api/auth/1/login";\n    ServiceProfile["AUTH_1_LOGOUT"] = "http://iiif.io/api/auth/1/logout";\n    ServiceProfile["AUTH_1_PROBE"] = "http://iiif.io/api/auth/1/probe";\n    ServiceProfile["AUTH_1_TOKEN"] = "http://iiif.io/api/auth/1/token";\n    // search api\n    ServiceProfile["SEARCH_0"] = "http://iiif.io/api/search/0/search";\n    ServiceProfile["SEARCH_0_AUTO_COMPLETE"] = "http://iiif.io/api/search/0/autocomplete";\n    ServiceProfile["SEARCH_1"] = "http://iiif.io/api/search/1/search";\n    ServiceProfile["SEARCH_1_AUTO_COMPLETE"] = "http://iiif.io/api/search/1/autocomplete";\n    // extensions\n    ServiceProfile["TRACKING_EXTENSIONS"] = "http://universalviewer.io/tracking-extensions-profile";\n    ServiceProfile["UI_EXTENSIONS"] = "http://universalviewer.io/ui-extensions-profile";\n    ServiceProfile["PRINT_EXTENSIONS"] = "http://universalviewer.io/print-extensions-profile";\n    ServiceProfile["SHARE_EXTENSIONS"] = "http://universalviewer.io/share-extensions-profile";\n    ServiceProfile["DOWNLOAD_EXTENSIONS"] = "http://universalviewer.io/download-extensions-profile";\n    // other\n    ServiceProfile["OTHER_MANIFESTATIONS"] = "http://iiif.io/api/otherManifestations.json";\n    ServiceProfile["IXIF"] = "http://wellcomelibrary.org/ld/ixif/0/alpha.json";\n})(ServiceProfile = exports.ServiceProfile || (exports.ServiceProfile = {}));\nvar ServiceType;\n(function (ServiceType) {\n    ServiceType["IMAGE_SERVICE_2"] = "ImageService2";\n    ServiceType["IMAGE_SERVICE_3"] = "ImageService3";\n})(ServiceType = exports.ServiceType || (exports.ServiceType = {}));\nvar ViewingDirection;\n(function (ViewingDirection) {\n    ViewingDirection["BOTTOM_TO_TOP"] = "bottom-to-top";\n    ViewingDirection["LEFT_TO_RIGHT"] = "left-to-right";\n    ViewingDirection["RIGHT_TO_LEFT"] = "right-to-left";\n    ViewingDirection["TOP_TO_BOTTOM"] = "top-to-bottom";\n})(ViewingDirection = exports.ViewingDirection || (exports.ViewingDirection = {}));\nvar ViewingHint;\n(function (ViewingHint) {\n    ViewingHint["CONTINUOUS"] = "continuous";\n    ViewingHint["INDIVIDUALS"] = "individuals";\n    ViewingHint["NON_PAGED"] = "non-paged";\n    ViewingHint["PAGED"] = "paged";\n    ViewingHint["TOP"] = "top";\n})(ViewingHint = exports.ViewingHint || (exports.ViewingHint = {}));\n//# sourceMappingURL=index.js.map\n\n//# sourceURL=webpack://manifesto/./node_modules/@iiif/vocabulary/dist-commonjs/index.js?')},"./node_modules/isomorphic-unfetch/index.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('function r(m) {\n\treturn (m && m.default) || m;\n}\nmodule.exports = __webpack_require__.g.fetch =\n\t__webpack_require__.g.fetch ||\n\t(typeof process == "undefined"\n\t\t? r(__webpack_require__(/*! unfetch */ "./node_modules/unfetch/dist/unfetch.module.js"))\n\t\t: function (url, opts) {\n\t\t\t\tif (typeof url === "string" || url instanceof URL) {\n\t\t\t\t\turl = String(url).replace(/^\\/\\//g, "https://");\n\t\t\t\t}\n\t\t\t\treturn Promise.resolve(/*! import() */).then(__webpack_require__.t.bind(__webpack_require__, /*! node-fetch */ "node-fetch", 23)).then((m) => r(m)(url, opts));\n\t\t  });\n\n\n//# sourceURL=webpack://manifesto/./node_modules/isomorphic-unfetch/index.js?')},"./node_modules/lodash/_Symbol.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var root = __webpack_require__(/*! ./_root */ "./node_modules/lodash/_root.js");\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/_Symbol.js?')},"./node_modules/lodash/_arrayPush.js":module=>{eval("/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/_arrayPush.js?")},"./node_modules/lodash/_baseFlatten.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var arrayPush = __webpack_require__(/*! ./_arrayPush */ "./node_modules/lodash/_arrayPush.js"),\n    isFlattenable = __webpack_require__(/*! ./_isFlattenable */ "./node_modules/lodash/_isFlattenable.js");\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/_baseFlatten.js?')},"./node_modules/lodash/_baseGetTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js"),\n    getRawTag = __webpack_require__(/*! ./_getRawTag */ "./node_modules/lodash/_getRawTag.js"),\n    objectToString = __webpack_require__(/*! ./_objectToString */ "./node_modules/lodash/_objectToString.js");\n\n/** `Object#toString` result references. */\nvar nullTag = \'[object Null]\',\n    undefinedTag = \'[object Undefined]\';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/_baseGetTag.js?')},"./node_modules/lodash/_baseIsArguments.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var baseGetTag = __webpack_require__(/*! ./_baseGetTag */ "./node_modules/lodash/_baseGetTag.js"),\n    isObjectLike = __webpack_require__(/*! ./isObjectLike */ "./node_modules/lodash/isObjectLike.js");\n\n/** `Object#toString` result references. */\nvar argsTag = \'[object Arguments]\';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/_baseIsArguments.js?')},"./node_modules/lodash/_freeGlobal.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof __webpack_require__.g == 'object' && __webpack_require__.g && __webpack_require__.g.Object === Object && __webpack_require__.g;\n\nmodule.exports = freeGlobal;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/_freeGlobal.js?")},"./node_modules/lodash/_getRawTag.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js");\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/_getRawTag.js?')},"./node_modules/lodash/_isFlattenable.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var Symbol = __webpack_require__(/*! ./_Symbol */ "./node_modules/lodash/_Symbol.js"),\n    isArguments = __webpack_require__(/*! ./isArguments */ "./node_modules/lodash/isArguments.js"),\n    isArray = __webpack_require__(/*! ./isArray */ "./node_modules/lodash/isArray.js");\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/_isFlattenable.js?')},"./node_modules/lodash/_objectToString.js":module=>{eval("/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/_objectToString.js?")},"./node_modules/lodash/_root.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var freeGlobal = __webpack_require__(/*! ./_freeGlobal */ \"./node_modules/lodash/_freeGlobal.js\");\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/_root.js?")},"./node_modules/lodash/flatten.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var baseFlatten = __webpack_require__(/*! ./_baseFlatten */ "./node_modules/lodash/_baseFlatten.js");\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/flatten.js?')},"./node_modules/lodash/flattenDeep.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval('var baseFlatten = __webpack_require__(/*! ./_baseFlatten */ "./node_modules/lodash/_baseFlatten.js");\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Recursively flattens `array`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flattenDeep([1, [2, [3, [4]], 5]]);\n * // => [1, 2, 3, 4, 5]\n */\nfunction flattenDeep(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, INFINITY) : [];\n}\n\nmodule.exports = flattenDeep;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/flattenDeep.js?')},"./node_modules/lodash/isArguments.js":(module,__unused_webpack_exports,__webpack_require__)=>{eval("var baseIsArguments = __webpack_require__(/*! ./_baseIsArguments */ \"./node_modules/lodash/_baseIsArguments.js\"),\n    isObjectLike = __webpack_require__(/*! ./isObjectLike */ \"./node_modules/lodash/isObjectLike.js\");\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/isArguments.js?")},"./node_modules/lodash/isArray.js":module=>{eval("/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/isArray.js?")},"./node_modules/lodash/isObjectLike.js":module=>{eval("/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n\n\n//# sourceURL=webpack://manifesto/./node_modules/lodash/isObjectLike.js?")},"./src/Annotation.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Annotation = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Annotation = /** @class */ (function (_super) {\n    __extends(Annotation, _super);\n    function Annotation(jsonld, options) {\n        return _super.call(this, jsonld, options) || this;\n    }\n    Annotation.prototype.getBody = function () {\n        var bodies = [];\n        var body = this.getProperty("body");\n        // todo: make this a generic "property that can be an object or array enumerator" util\n        if (body) {\n            if (Array.isArray(body)) {\n                for (var i = 0; i < body.length; i++) {\n                    var b = body[i];\n                    if (b.items) {\n                        for (var i_1 = 0; i_1 < b.items.length; i_1++) {\n                            // todo: don\'t ignore that it\'s a choice. maybe add isChoice() to IAnnotationBody?\n                            var c = b.items[i_1];\n                            bodies.push(new internal_1.AnnotationBody(c, this.options));\n                        }\n                    }\n                    else {\n                        bodies.push(new internal_1.AnnotationBody(b, this.options));\n                    }\n                }\n            }\n            else if (body.items) {\n                for (var i = 0; i < body.items.length; i++) {\n                    var b = body.items[i];\n                    bodies.push(new internal_1.AnnotationBody(b, this.options));\n                }\n            }\n            else {\n                bodies.push(new internal_1.AnnotationBody(body, this.options));\n            }\n        }\n        return bodies;\n    };\n    Annotation.prototype.getBody3D = function () {\n        var bodies = [].concat(this.getProperty("body"));\n        if (bodies.length != 1)\n            throw new Error("0 or multiple body items not supported");\n        var raw_body = bodies[0];\n        if (raw_body.type && raw_body.type === "SpecificResource")\n            return new internal_1.SpecificResourceForBody(raw_body);\n        else\n            return new internal_1.AnnotationBody(raw_body);\n    };\n    Annotation.prototype.getMotivation = function () {\n        var motivation = this.getProperty("motivation");\n        if (motivation) {\n            //const key: string | undefined = Object.keys(AnnotationMotivationEnum).find(k => AnnotationMotivationEnum[k] === motivation);\n            return motivation;\n        }\n        return null;\n    };\n    // open annotation\n    Annotation.prototype.getOn = function () {\n        return this.getProperty("on");\n    };\n    Annotation.prototype.getTarget = function () {\n        var rawTarget = this.getProperty("target");\n        if (rawTarget.type && rawTarget.type == "SpecificResource") {\n            //console.log("constructing SpecificResource "+ rawTarget);\n            return new internal_1.SpecificResourceForTarget(rawTarget);\n        }\n        else if (typeof (rawTarget) === \'string\') {\n            //console.log("returning string target");\n            return rawTarget;\n        }\n        else {\n            throw new Error("unknown target specified");\n        }\n    };\n    Annotation.prototype.getResource = function () {\n        return new internal_1.Resource(this.getProperty("resource"), this.options);\n    };\n    return Annotation;\n}(internal_1.ManifestResource));\nexports.Annotation = Annotation;\n\n\n//# sourceURL=webpack://manifesto/./src/Annotation.ts?')},"./src/AnnotationBody.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.AnnotationBody = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar AnnotationBody = /** @class */ (function (_super) {\n    __extends(AnnotationBody, _super);\n    function AnnotationBody(jsonld, options) {\n        return _super.call(this, jsonld, options) || this;\n    }\n    AnnotationBody.prototype.getFormat = function () {\n        var format = this.getProperty("format");\n        console.log("getFormat() : format is " + format);\n        if (format) {\n            return internal_1.Utils.getMediaType(format);\n        }\n        return null;\n    };\n    AnnotationBody.prototype.getType = function () {\n        var type = this.getProperty("type");\n        if (type) {\n            return (internal_1.Utils.normaliseType(this.getProperty("type")));\n        }\n        return null;\n    };\n    AnnotationBody.prototype.getWidth = function () {\n        return this.getProperty("width");\n    };\n    AnnotationBody.prototype.getHeight = function () {\n        return this.getProperty("height");\n    };\n    return AnnotationBody;\n}(internal_1.ManifestResource));\nexports.AnnotationBody = AnnotationBody;\n\n\n//# sourceURL=webpack://manifesto/./src/AnnotationBody.ts?')},"./src/AnnotationList.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.AnnotationList = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar AnnotationList = /** @class */ (function (_super) {\n    __extends(AnnotationList, _super);\n    function AnnotationList(label, jsonld, options) {\n        var _this = _super.call(this, jsonld) || this;\n        _this.label = label;\n        _this.options = options;\n        return _this;\n    }\n    AnnotationList.prototype.getIIIFResourceType = function () {\n        return internal_1.Utils.normaliseType(this.getProperty("type"));\n    };\n    AnnotationList.prototype.getLabel = function () {\n        return this.label;\n    };\n    AnnotationList.prototype.getResources = function () {\n        var _this = this;\n        var resources = this.getProperty("resources");\n        return resources.map(function (resource) { return new internal_1.Annotation(resource, _this.options); });\n    };\n    AnnotationList.prototype.load = function () {\n        var _this = this;\n        return new Promise(function (resolve, reject) {\n            if (_this.isLoaded) {\n                resolve(_this);\n            }\n            else {\n                var id = _this.__jsonld.id;\n                if (!id) {\n                    id = _this.__jsonld["@id"];\n                }\n                internal_1.Utils.loadManifest(id)\n                    .then(function (data) {\n                    _this.__jsonld = data;\n                    _this.context = _this.getProperty("context");\n                    _this.id = _this.getProperty("id");\n                    _this.isLoaded = true;\n                    resolve(_this);\n                })\n                    .catch(reject);\n            }\n        });\n    };\n    return AnnotationList;\n}(internal_1.JSONLDResource));\nexports.AnnotationList = AnnotationList;\n\n\n//# sourceURL=webpack://manifesto/./src/AnnotationList.ts?')},"./src/AnnotationPage.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.AnnotationPage = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar AnnotationPage = /** @class */ (function (_super) {\n    __extends(AnnotationPage, _super);\n    function AnnotationPage(jsonld, options) {\n        return _super.call(this, jsonld, options) || this;\n    }\n    AnnotationPage.prototype.getItems = function () {\n        return this.getProperty("items");\n    };\n    return AnnotationPage;\n}(internal_1.ManifestResource));\nexports.AnnotationPage = AnnotationPage;\n\n\n//# sourceURL=webpack://manifesto/./src/AnnotationPage.ts?')},"./src/Canvas.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { "default": mod };\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Canvas = void 0;\nvar dist_commonjs_1 = __webpack_require__(/*! @iiif/vocabulary/dist-commonjs */ "./node_modules/@iiif/vocabulary/dist-commonjs/index.js");\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\n// @ts-ignore\nvar flatten_1 = __importDefault(__webpack_require__(/*! lodash/flatten */ "./node_modules/lodash/flatten.js"));\n// @ts-ignore\nvar flattenDeep_1 = __importDefault(__webpack_require__(/*! lodash/flattenDeep */ "./node_modules/lodash/flattenDeep.js"));\nvar Canvas = /** @class */ (function (_super) {\n    __extends(Canvas, _super);\n    function Canvas(jsonld, options) {\n        return _super.call(this, jsonld, options) || this;\n    }\n    // http://iiif.io/api/image/2.1/#canonical-uri-syntax\n    Canvas.prototype.getCanonicalImageUri = function (w) {\n        var id = null;\n        var region = "full";\n        var rotation = 0;\n        var quality = "default";\n        var width = w;\n        var size;\n        // if an info.json has been loaded\n        if (this.externalResource &&\n            this.externalResource.data &&\n            this.externalResource.data["@id"]) {\n            id = this.externalResource.data["@id"];\n            if (!width) {\n                width = this.externalResource.data.width;\n            }\n            if (this.externalResource.data["@context"]) {\n                if (this.externalResource.data["@context"].indexOf("/1.0/context.json") >\n                    -1 ||\n                    this.externalResource.data["@context"].indexOf("/1.1/context.json") >\n                        -1 ||\n                    this.externalResource.data["@context"].indexOf("/1/context.json") > -1) {\n                    quality = "native";\n                }\n            }\n        }\n        else {\n            // info.json hasn\'t been loaded yet\n            var images = void 0;\n            // presentation 2.0\n            images = this.getImages();\n            if (images && images.length) {\n                var firstImage = images[0];\n                var resource = firstImage.getResource();\n                var services = resource.getServices();\n                if (!width) {\n                    width = resource.getWidth();\n                }\n                var service = services\n                    ? services.find(function (service) {\n                        return (internal_1.Utils.isImageProfile(service.getProfile()) ||\n                            internal_1.Utils.isImageServiceType(service.getIIIFResourceType()));\n                    })\n                    : null;\n                if (service) {\n                    id = service.id;\n                    quality = internal_1.Utils.getImageQuality(service.getProfile());\n                }\n                else if (width === resource.getWidth()) {\n                    // if the passed width is the same as the resource width\n                    // i.e. not looking for a thumbnail\n                    // return the full size image.\n                    // used for download options when loading static images.\n                    return resource.id;\n                }\n            }\n            // presentation 3.0\n            images = this.getContent();\n            if (images && images.length) {\n                var firstImage = images[0];\n                var body = firstImage.getBody();\n                var anno = body[0];\n                var services = anno.getServices();\n                if (!width) {\n                    width = anno.getWidth();\n                }\n                var service = services\n                    ? services.find(function (service) {\n                        return internal_1.Utils.isImageServiceType(service.getIIIFResourceType());\n                    })\n                    : null;\n                if (service) {\n                    id = service.id;\n                    quality = internal_1.Utils.getImageQuality(service.getProfile());\n                }\n                else if (width === anno.getWidth()) {\n                    // if the passed width is the same as the resource width\n                    // i.e. not looking for a thumbnail\n                    // return the full size image.\n                    // used for download options when loading static images.\n                    return anno.id;\n                }\n            }\n            // todo: should this be moved to getThumbUri?\n            if (!id) {\n                var thumbnail = this.getProperty("thumbnail");\n                if (thumbnail) {\n                    if (typeof thumbnail === "string") {\n                        return thumbnail;\n                    }\n                    else {\n                        if (thumbnail["@id"]) {\n                            return thumbnail["@id"];\n                        }\n                        else if (thumbnail.length) {\n                            return thumbnail[0].id;\n                        }\n                    }\n                }\n            }\n        }\n        size = width + ",";\n        // trim off trailing \'/\'\n        if (id && id.endsWith("/")) {\n            id = id.substr(0, id.length - 1);\n        }\n        var uri = [id, region, size, rotation, quality + ".jpg"].join("/");\n        return uri;\n    };\n    Canvas.prototype.getMaxDimensions = function () {\n        var maxDimensions = null;\n        var profile;\n        if (this.externalResource &&\n            this.externalResource.data &&\n            this.externalResource.data.profile) {\n            profile = this.externalResource.data.profile;\n            if (Array.isArray(profile)) {\n                profile = profile.filter(function (p) { return p["maxWidth" || 0]; })[0];\n                if (profile) {\n                    maxDimensions = new internal_1.Size(profile.maxWidth, profile.maxHeight ? profile.maxHeight : profile.maxWidth);\n                }\n            }\n        }\n        return maxDimensions;\n    };\n    // Presentation API 3.0\n    Canvas.prototype.getContent = function () {\n        var content = [];\n        var items = this.__jsonld.items || this.__jsonld.content;\n        if (!items)\n            return content;\n        // should be contained in an AnnotationPage\n        var annotationPage = null;\n        if (items.length) {\n            annotationPage = new internal_1.AnnotationPage(items[0], this.options);\n        }\n        if (!annotationPage) {\n            return content;\n        }\n        var annotations = annotationPage.getItems();\n        for (var i = 0; i < annotations.length; i++) {\n            var a = annotations[i];\n            var annotation = new internal_1.Annotation(a, this.options);\n            content.push(annotation);\n        }\n        return content;\n    };\n    Canvas.prototype.getDuration = function () {\n        return this.getProperty("duration");\n    };\n    // presentation 2.0\n    Canvas.prototype.getImages = function () {\n        var images = [];\n        if (!this.__jsonld.images)\n            return images;\n        for (var i = 0; i < this.__jsonld.images.length; i++) {\n            var a = this.__jsonld.images[i];\n            var annotation = new internal_1.Annotation(a, this.options);\n            images.push(annotation);\n        }\n        return images;\n    };\n    Canvas.prototype.getIndex = function () {\n        return this.getProperty("index");\n    };\n    Canvas.prototype.getOtherContent = function () {\n        var _this = this;\n        var otherContent = Array.isArray(this.getProperty("otherContent"))\n            ? this.getProperty("otherContent")\n            : [this.getProperty("otherContent")];\n        var canonicalComparison = function (typeA, typeB) {\n            if (typeof typeA !== "string" || typeof typeB !== "string") {\n                return false;\n            }\n            return typeA.toLowerCase() === typeA.toLowerCase();\n        };\n        var otherPromises = otherContent\n            .filter(function (otherContent) {\n            return otherContent &&\n                canonicalComparison(otherContent["@type"], "sc:AnnotationList");\n        })\n            .map(function (annotationList, i) {\n            return new internal_1.AnnotationList(annotationList["label"] || "Annotation list ".concat(i), annotationList, _this.options);\n        })\n            .map(function (annotationList) { return annotationList.load(); });\n        return Promise.all(otherPromises);\n    };\n    // Prefer thumbnail service to image service if supplied and if\n    // the thumbnail service can provide a satisfactory size +/- x pixels.\n    // this is used to get thumb URIs *before* the info.json has been requested\n    // and populate thumbnails in a viewer.\n    // the publisher may also provide pre-computed fixed-size thumbs for better performance.\n    //getThumbUri(width: number): string {\n    //\n    //    var uri;\n    //    var images: IAnnotation[] = this.getImages();\n    //\n    //    if (images && images.length) {\n    //        var firstImage = images[0];\n    //        var resource: IResource = firstImage.getResource();\n    //        var services: IService[] = resource.getServices();\n    //\n    //        for (let i = 0; i < services.length; i++) {\n    //            var service: IService = services[i];\n    //            var id = service.id;\n    //\n    //            if (!_endsWith(id, \'/\')) {\n    //                id += \'/\';\n    //            }\n    //\n    //            uri = id + \'full/\' + width + \',/0/\' + Utils.getImageQuality(service.getProfile()) + \'.jpg\';\n    //        }\n    //    }\n    //\n    //    return uri;\n    //}\n    //getType(): CanvasType {\n    //    return new CanvasType(this.getProperty(\'@type\').toLowerCase());\n    //}\n    Canvas.prototype.getWidth = function () {\n        return this.getProperty("width");\n    };\n    Canvas.prototype.getHeight = function () {\n        return this.getProperty("height");\n    };\n    Canvas.prototype.getViewingHint = function () {\n        return this.getProperty("viewingHint");\n    };\n    Object.defineProperty(Canvas.prototype, "imageResources", {\n        get: function () {\n            var _this = this;\n            var resources = (0, flattenDeep_1.default)([\n                this.getImages().map(function (i) { return i.getResource(); }),\n                this.getContent().map(function (i) { return i.getBody(); })\n            ]);\n            return (0, flatten_1.default)(resources.map(function (resource) {\n                switch (resource.getProperty("type").toLowerCase()) {\n                    case dist_commonjs_1.ExternalResourceType.CHOICE:\n                    case dist_commonjs_1.ExternalResourceType.OA_CHOICE:\n                        return new Canvas({\n                            images: (0, flatten_1.default)([\n                                resource.getProperty("default"),\n                                resource.getProperty("item")\n                            ]).map(function (r) { return ({ resource: r }); })\n                        }, _this.options)\n                            .getImages()\n                            .map(function (i) { return i.getResource(); });\n                    default:\n                        return resource;\n                }\n            }));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Canvas.prototype, "resourceAnnotations", {\n        get: function () {\n            return (0, flattenDeep_1.default)([this.getImages(), this.getContent()]);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Returns a given resource Annotation, based on a contained resource or body\n     * id\n     */\n    Canvas.prototype.resourceAnnotation = function (id) {\n        return this.resourceAnnotations.find(function (anno) {\n            return anno.getResource().id === id ||\n                (0, flatten_1.default)(new Array(anno.getBody())).some(function (body) { return body.id === id; });\n        });\n    };\n    /**\n     * Returns the fragment placement values if a resourceAnnotation is placed on\n     * a canvas somewhere besides the full extent\n     */\n    Canvas.prototype.onFragment = function (id) {\n        var resourceAnnotation = this.resourceAnnotation(id);\n        if (!resourceAnnotation)\n            return undefined;\n        // IIIF v2\n        var on = resourceAnnotation.getProperty("on");\n        // IIIF v3\n        var target = resourceAnnotation.getProperty("target");\n        if (!on || !target) {\n            return undefined;\n        }\n        var fragmentMatch = (on || target).match(/xywh=(.*)$/);\n        if (!fragmentMatch)\n            return undefined;\n        return fragmentMatch[1].split(",").map(function (str) { return parseInt(str, 10); });\n    };\n    Object.defineProperty(Canvas.prototype, "iiifImageResources", {\n        get: function () {\n            return this.imageResources.filter(function (r) { return r && r.getServices()[0] && r.getServices()[0].id; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Canvas.prototype, "imageServiceIds", {\n        get: function () {\n            return this.iiifImageResources.map(function (r) { return r.getServices()[0].id; });\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Canvas.prototype, "aspectRatio", {\n        get: function () {\n            return this.getWidth() / this.getHeight();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return Canvas;\n}(internal_1.Resource));\nexports.Canvas = Canvas;\n\n\n//# sourceURL=webpack://manifesto/./src/Canvas.ts?')},"./src/Collection.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Collection = void 0;\nvar dist_commonjs_1 = __webpack_require__(/*! @iiif/vocabulary/dist-commonjs */ "./node_modules/@iiif/vocabulary/dist-commonjs/index.js");\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Collection = /** @class */ (function (_super) {\n    __extends(Collection, _super);\n    function Collection(jsonld, options) {\n        var _this = _super.call(this, jsonld, options) || this;\n        _this.items = [];\n        _this._collections = null;\n        _this._manifests = null;\n        jsonld.__collection = _this;\n        return _this;\n    }\n    Collection.prototype.getCollections = function () {\n        if (this._collections) {\n            return this._collections;\n        }\n        return (this._collections = (this.items.filter(function (m) { return m.isCollection(); })));\n    };\n    Collection.prototype.getManifests = function () {\n        if (this._manifests) {\n            return this._manifests;\n        }\n        return (this._manifests = (this.items.filter(function (m) { return m.isManifest(); })));\n    };\n    Collection.prototype.getCollectionByIndex = function (collectionIndex) {\n        var collections = this.getCollections();\n        var collection;\n        for (var i = 0; i < collections.length; i++) {\n            var c = collections[i];\n            if (c.index === collectionIndex) {\n                collection = c;\n            }\n        }\n        if (collection) {\n            collection.options.index = collectionIndex;\n            // id for collection MUST be dereferenceable\n            return collection.load();\n        }\n        else {\n            throw new Error("Collection index not found");\n        }\n    };\n    Collection.prototype.getManifestByIndex = function (manifestIndex) {\n        var manifests = this.getManifests();\n        var manifest;\n        for (var i = 0; i < manifests.length; i++) {\n            var m = manifests[i];\n            if (m.index === manifestIndex) {\n                manifest = m;\n            }\n        }\n        if (manifest) {\n            manifest.options.index = manifestIndex;\n            return manifest.load();\n        }\n        else {\n            throw new Error("Manifest index not found");\n        }\n    };\n    Collection.prototype.getTotalCollections = function () {\n        return this.getCollections().length;\n    };\n    Collection.prototype.getTotalManifests = function () {\n        return this.getManifests().length;\n    };\n    Collection.prototype.getTotalItems = function () {\n        return this.items.length;\n    };\n    Collection.prototype.getViewingDirection = function () {\n        if (this.getProperty("viewingDirection")) {\n            return this.getProperty("viewingDirection");\n        }\n        return dist_commonjs_1.ViewingDirection.LEFT_TO_RIGHT;\n    };\n    /**\n     * Note: this only will return the first behavior as per the manifesto convention\n     * IIIF v3 supports multiple behaviors\n     */\n    Collection.prototype.getBehavior = function () {\n        var behavior = this.getProperty("behavior");\n        if (Array.isArray(behavior)) {\n            behavior = behavior[0];\n        }\n        if (behavior) {\n            return behavior;\n        }\n        return null;\n    };\n    Collection.prototype.getViewingHint = function () {\n        return this.getProperty("viewingHint");\n    };\n    /**\n     * Get a tree of sub collections and manifests, using each child manifest\'s first \'top\' range.\n     */\n    Collection.prototype.getDefaultTree = function () {\n        _super.prototype.getDefaultTree.call(this);\n        //console.log("get default tree for ", this.id);\n        this.defaultTree.data.type = internal_1.Utils.normaliseType(internal_1.TreeNodeType.COLLECTION);\n        this._parseManifests(this);\n        this._parseCollections(this);\n        internal_1.Utils.generateTreeNodeIds(this.defaultTree);\n        return this.defaultTree;\n    };\n    Collection.prototype._parseManifests = function (parentCollection) {\n        if (parentCollection.getManifests() &&\n            parentCollection.getManifests().length) {\n            for (var i = 0; i < parentCollection.getManifests().length; i++) {\n                var manifest = parentCollection.getManifests()[i];\n                var tree = manifest.getDefaultTree();\n                tree.label =\n                    manifest.parentLabel ||\n                        manifest.getLabel().getValue(this.options.locale) ||\n                        "manifest " + (i + 1);\n                tree.navDate = manifest.getNavDate();\n                tree.data.id = manifest.id;\n                tree.data.type = internal_1.Utils.normaliseType(internal_1.TreeNodeType.MANIFEST);\n                parentCollection.defaultTree.addNode(tree);\n            }\n        }\n    };\n    Collection.prototype._parseCollections = function (parentCollection) {\n        //console.log("parse collections for ", parentCollection.id);\n        if (parentCollection.getCollections() &&\n            parentCollection.getCollections().length) {\n            for (var i = 0; i < parentCollection.getCollections().length; i++) {\n                var collection = parentCollection.getCollections()[i];\n                var tree = collection.getDefaultTree();\n                tree.label =\n                    collection.parentLabel ||\n                        collection.getLabel().getValue(this.options.locale) ||\n                        "collection " + (i + 1);\n                tree.navDate = collection.getNavDate();\n                tree.data.id = collection.id;\n                tree.data.type = internal_1.Utils.normaliseType(internal_1.TreeNodeType.COLLECTION);\n                parentCollection.defaultTree.addNode(tree);\n            }\n        }\n    };\n    return Collection;\n}(internal_1.IIIFResource));\nexports.Collection = Collection;\n\n\n//# sourceURL=webpack://manifesto/./src/Collection.ts?')},"./src/Duration.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Duration = void 0;\nvar Duration = /** @class */ (function () {\n    function Duration(start, end) {\n        this.start = start;\n        this.end = end;\n    }\n    Duration.prototype.getLength = function () {\n        return this.end - this.start;\n    };\n    return Duration;\n}());\nexports.Duration = Duration;\n\n\n//# sourceURL=webpack://manifesto/./src/Duration.ts?')},"./src/IAccessToken.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\n\n\n//# sourceURL=webpack://manifesto/./src/IAccessToken.ts?')},"./src/IExternalImageResourceData.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\n\n\n//# sourceURL=webpack://manifesto/./src/IExternalImageResourceData.ts?')},"./src/IExternalResource.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\n\n\n//# sourceURL=webpack://manifesto/./src/IExternalResource.ts?')},"./src/IExternalResourceData.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\n\n\n//# sourceURL=webpack://manifesto/./src/IExternalResourceData.ts?')},"./src/IExternalResourceOptions.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\n\n\n//# sourceURL=webpack://manifesto/./src/IExternalResourceOptions.ts?')},"./src/IIIFResource.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.IIIFResource = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar dist_commonjs_1 = __webpack_require__(/*! @iiif/vocabulary/dist-commonjs */ "./node_modules/@iiif/vocabulary/dist-commonjs/index.js");\nvar IIIFResource = /** @class */ (function (_super) {\n    __extends(IIIFResource, _super);\n    function IIIFResource(jsonld, options) {\n        var _this = _super.call(this, jsonld, options) || this;\n        _this.index = -1;\n        _this.isLoaded = false;\n        var defaultOptions = {\n            defaultLabel: "-",\n            locale: "en-GB",\n            resource: _this,\n            pessimisticAccessControl: false\n        };\n        _this.options = Object.assign(defaultOptions, options);\n        return _this;\n    }\n    /**\n     * @deprecated\n     */\n    IIIFResource.prototype.getAttribution = function () {\n        //console.warn(\'getAttribution will be deprecated, use getRequiredStatement instead.\');\n        var attribution = this.getProperty("attribution");\n        if (attribution) {\n            return internal_1.PropertyValue.parse(attribution, this.options.locale);\n        }\n        return new internal_1.PropertyValue([], this.options.locale);\n    };\n    IIIFResource.prototype.getDescription = function () {\n        var description = this.getProperty("description");\n        if (description) {\n            return internal_1.PropertyValue.parse(description, this.options.locale);\n        }\n        return new internal_1.PropertyValue([], this.options.locale);\n    };\n    IIIFResource.prototype.getHomepage = function () {\n        var homepage = this.getProperty("homepage");\n        if (!homepage)\n            return null;\n        if (typeof homepage == "string")\n            return homepage;\n        if (Array.isArray(homepage) && homepage.length) {\n            homepage = homepage[0];\n        }\n        return homepage["@id"] || homepage.id;\n    };\n    IIIFResource.prototype.getIIIFResourceType = function () {\n        return internal_1.Utils.normaliseType(this.getProperty("type"));\n    };\n    IIIFResource.prototype.getLogo = function () {\n        var logo = this.getProperty("logo");\n        // Presentation 3.\n        // The logo is exclusive to the "provider" property, which is of type "Agent".\n        // In order to fulfil `manifest.getLogo()` we should check\n        // When P3 is fully supported, the following should work.\n        // return this.getProvider()?.getLogo();\n        if (!logo) {\n            var provider = this.getProperty("provider");\n            if (!provider) {\n                return null;\n            }\n            logo = provider.logo;\n        }\n        if (!logo)\n            return null;\n        if (typeof logo === "string")\n            return logo;\n        if (Array.isArray(logo) && logo.length) {\n            logo = logo[0];\n        }\n        return logo["@id"] || logo.id;\n    };\n    IIIFResource.prototype.getLicense = function () {\n        return internal_1.Utils.getLocalisedValue(this.getProperty("license"), this.options.locale);\n    };\n    IIIFResource.prototype.getNavDate = function () {\n        return new Date(this.getProperty("navDate"));\n    };\n    IIIFResource.prototype.getRelated = function () {\n        return this.getProperty("related");\n    };\n    IIIFResource.prototype.getSeeAlso = function () {\n        return this.getProperty("seeAlso");\n    };\n    IIIFResource.prototype.getTrackingLabel = function () {\n        var service = (this.getService(dist_commonjs_1.ServiceProfile.TRACKING_EXTENSIONS));\n        if (service) {\n            return service.getProperty("trackingLabel");\n        }\n        return "";\n    };\n    IIIFResource.prototype.getDefaultTree = function () {\n        this.defaultTree = new internal_1.TreeNode("root");\n        this.defaultTree.data = this;\n        return this.defaultTree;\n    };\n    IIIFResource.prototype.getRequiredStatement = function () {\n        var requiredStatement = null;\n        var _requiredStatement = this.getProperty("requiredStatement");\n        if (_requiredStatement) {\n            requiredStatement = new internal_1.LabelValuePair(this.options.locale);\n            requiredStatement.parse(_requiredStatement);\n        }\n        else {\n            // fall back to attribution (if it exists)\n            var attribution = this.getAttribution();\n            if (attribution) {\n                requiredStatement = new internal_1.LabelValuePair(this.options.locale);\n                requiredStatement.value = attribution;\n            }\n        }\n        return requiredStatement;\n    };\n    IIIFResource.prototype.isCollection = function () {\n        if (this.getIIIFResourceType() === dist_commonjs_1.IIIFResourceType.COLLECTION) {\n            return true;\n        }\n        return false;\n    };\n    IIIFResource.prototype.isManifest = function () {\n        if (this.getIIIFResourceType() === dist_commonjs_1.IIIFResourceType.MANIFEST) {\n            return true;\n        }\n        return false;\n    };\n    IIIFResource.prototype.load = function () {\n        var that = this;\n        return new Promise(function (resolve) {\n            if (that.isLoaded) {\n                resolve(that);\n            }\n            else {\n                var options_1 = that.options;\n                options_1.navDate = that.getNavDate();\n                var id = that.__jsonld.id;\n                if (!id) {\n                    id = that.__jsonld["@id"];\n                }\n                internal_1.Utils.loadManifest(id).then(function (data) {\n                    that.parentLabel = that.getLabel().getValue(options_1.locale);\n                    var parsed = internal_1.Deserialiser.parse(data, options_1);\n                    that = Object.assign(that, parsed);\n                    //that.parentCollection = options.resource.parentCollection;\n                    that.index = options_1.index;\n                    resolve(that);\n                });\n            }\n        });\n    };\n    return IIIFResource;\n}(internal_1.ManifestResource));\nexports.IIIFResource = IIIFResource;\n\n\n//# sourceURL=webpack://manifesto/./src/IIIFResource.ts?')},"./src/IManifestoOptions.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\n\n\n//# sourceURL=webpack://manifesto/./src/IManifestoOptions.ts?')},"./src/JSONLDResource.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.JSONLDResource = void 0;\nvar JSONLDResource = /** @class */ (function () {\n    function JSONLDResource(jsonld) {\n        this.__jsonld = jsonld;\n        this.context = this.getProperty("context");\n        this.id = this.getProperty("id");\n    }\n    JSONLDResource.prototype.getProperty = function (name) {\n        var prop = null;\n        if (this.__jsonld) {\n            prop = this.__jsonld[name];\n            if (!prop) {\n                // property may have a prepended \'@\'\n                prop = this.__jsonld["@" + name];\n            }\n        }\n        return prop;\n    };\n    return JSONLDResource;\n}());\nexports.JSONLDResource = JSONLDResource;\n\n\n//# sourceURL=webpack://manifesto/./src/JSONLDResource.ts?')},"./src/LabelValuePair.ts":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.LabelValuePair = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar LabelValuePair = /** @class */ (function () {\n    function LabelValuePair(defaultLocale) {\n        this.defaultLocale = defaultLocale;\n    }\n    LabelValuePair.prototype.parse = function (resource) {\n        this.resource = resource;\n        this.label = internal_1.PropertyValue.parse(this.resource.label, this.defaultLocale);\n        this.value = internal_1.PropertyValue.parse(this.resource.value, this.defaultLocale);\n    };\n    // shortcuts to get/set values based on user or default locale\n    LabelValuePair.prototype.getLabel = function (locale) {\n        if (this.label === null) {\n            return null;\n        }\n        if (Array.isArray(locale) && !locale.length) {\n            locale = undefined;\n        }\n        return this.label.getValue(locale || this.defaultLocale);\n    };\n    LabelValuePair.prototype.setLabel = function (value) {\n        if (this.label === null) {\n            this.label = new internal_1.PropertyValue([]);\n        }\n        this.label.setValue(value, this.defaultLocale);\n    };\n    LabelValuePair.prototype.getValue = function (locale, joinWith) {\n        if (joinWith === void 0) { joinWith = "<br/>"; }\n        if (this.value === null) {\n            return null;\n        }\n        if (Array.isArray(locale) && !locale.length) {\n            locale = undefined;\n        }\n        return this.value.getValue(locale || this.defaultLocale, joinWith);\n    };\n    LabelValuePair.prototype.getValues = function (locale) {\n        if (this.value === null) {\n            return [];\n        }\n        if (Array.isArray(locale) && !locale.length) {\n            locale = undefined;\n        }\n        return this.value.getValues(locale || this.defaultLocale);\n    };\n    LabelValuePair.prototype.setValue = function (value) {\n        if (this.value === null) {\n            this.value = new internal_1.PropertyValue([]);\n        }\n        this.value.setValue(value, this.defaultLocale);\n    };\n    return LabelValuePair;\n}());\nexports.LabelValuePair = LabelValuePair;\n\n\n//# sourceURL=webpack://manifesto/./src/LabelValuePair.ts?')},"./src/Language.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\n\n\n//# sourceURL=webpack://manifesto/./src/Language.ts?')},"./src/LanguageMap.ts":function(__unused_webpack_module,exports){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.LanguageMap = void 0;\n/** @deprecated Use PropertyValue instead */\nvar LanguageMap = /** @class */ (function (_super) {\n    __extends(LanguageMap, _super);\n    function LanguageMap() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /** @deprecated Use the `PropertyValue#getValue` instance method instead */\n    LanguageMap.getValue = function (languageCollection, locale) {\n        return languageCollection.getValue(locale, "<br/>");\n    };\n    /** @deprecated Use the `PropertyValue#getValues` instance method instead */\n    LanguageMap.getValues = function (languageCollection, locale) {\n        return languageCollection.getValues(locale);\n    };\n    return LanguageMap;\n}(Array));\nexports.LanguageMap = LanguageMap;\n\n\n//# sourceURL=webpack://manifesto/./src/LanguageMap.ts?')},"./src/Manifest.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Manifest = void 0;\nvar dist_commonjs_1 = __webpack_require__(/*! @iiif/vocabulary/dist-commonjs */ "./node_modules/@iiif/vocabulary/dist-commonjs/index.js");\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Manifest = /** @class */ (function (_super) {\n    __extends(Manifest, _super);\n    function Manifest(jsonld, options) {\n        var _this = _super.call(this, jsonld, options) || this;\n        _this.index = 0;\n        _this._allRanges = null;\n        _this.items = [];\n        _this._topRanges = [];\n        if (_this.__jsonld.structures && _this.__jsonld.structures.length) {\n            var topRanges = _this._getTopRanges();\n            for (var i = 0; i < topRanges.length; i++) {\n                var range = topRanges[i];\n                _this._parseRanges(range, String(i));\n            }\n        }\n        return _this;\n    }\n    /** @deprecated Use getAccompanyingCanvas instead */\n    Manifest.prototype.getPosterCanvas = function () {\n        var posterCanvas = this.getProperty("posterCanvas");\n        if (posterCanvas) {\n            posterCanvas = new internal_1.Canvas(posterCanvas, this.options);\n        }\n        return posterCanvas;\n    };\n    Manifest.prototype.getAccompanyingCanvas = function () {\n        var accompanyingCanvas = this.getProperty("accompanyingCanvas");\n        if (accompanyingCanvas) {\n            accompanyingCanvas = new internal_1.Canvas(accompanyingCanvas, this.options);\n        }\n        return accompanyingCanvas;\n    };\n    Manifest.prototype.getBehavior = function () {\n        var behavior = this.getProperty("behavior");\n        if (Array.isArray(behavior)) {\n            behavior = behavior[0];\n        }\n        if (behavior) {\n            return behavior;\n        }\n        return null;\n    };\n    Manifest.prototype.getDefaultTree = function () {\n        _super.prototype.getDefaultTree.call(this);\n        this.defaultTree.data.type = internal_1.Utils.normaliseType(internal_1.TreeNodeType.MANIFEST);\n        if (!this.isLoaded) {\n            return this.defaultTree;\n        }\n        var topRanges = this.getTopRanges();\n        // if there are any ranges in the manifest, default to the first \'top\' range or generated placeholder\n        if (topRanges.length) {\n            topRanges[0].getTree(this.defaultTree);\n        }\n        internal_1.Utils.generateTreeNodeIds(this.defaultTree);\n        return this.defaultTree;\n    };\n    Manifest.prototype._getTopRanges = function () {\n        var topRanges = [];\n        if (this.__jsonld.structures && this.__jsonld.structures.length) {\n            for (var i = 0; i < this.__jsonld.structures.length; i++) {\n                var json = this.__jsonld.structures[i];\n                if (json.viewingHint === dist_commonjs_1.ViewingHint.TOP) {\n                    topRanges.push(json);\n                }\n            }\n            // if no viewingHint="top" range was found, create a default one\n            if (!topRanges.length) {\n                var range = {};\n                range.ranges = this.__jsonld.structures;\n                topRanges.push(range);\n            }\n        }\n        return topRanges;\n    };\n    Manifest.prototype.getTopRanges = function () {\n        return this._topRanges;\n    };\n    Manifest.prototype._getRangeById = function (id) {\n        if (this.__jsonld.structures && this.__jsonld.structures.length) {\n            for (var i = 0; i < this.__jsonld.structures.length; i++) {\n                var r = this.__jsonld.structures[i];\n                if (r["@id"] === id || r.id === id) {\n                    return r;\n                }\n            }\n        }\n        return null;\n    };\n    //private _parseRangeCanvas(json: any, range: Range): void {\n    // todo: currently this isn\'t needed\n    //var canvas: IJSONLDResource = new JSONLDResource(json);\n    //range.items.push(<IManifestResource>canvas);\n    //}\n    Manifest.prototype._parseRanges = function (r, path, parentRange) {\n        var range;\n        var id = null;\n        if (typeof r === "string") {\n            id = r;\n            r = this._getRangeById(id);\n        }\n        if (!r) {\n            console.warn("Range:", id, "does not exist");\n            return;\n        }\n        range = new internal_1.Range(r, this.options);\n        range.parentRange = parentRange;\n        range.path = path;\n        if (!parentRange) {\n            this._topRanges.push(range);\n        }\n        else {\n            parentRange.items.push(range);\n        }\n        var items = r.items || r.members;\n        if (items) {\n            for (var i = 0; i < items.length; i++) {\n                var item = items[i];\n                // todo: use an ItemType constant?\n                if ((item["@type"] && item["@type"].toLowerCase() === "sc:range") ||\n                    (item["type"] && item["type"].toLowerCase() === "range")) {\n                    this._parseRanges(item, path + "/" + i, range);\n                }\n                else if ((item["@type"] && item["@type"].toLowerCase() === "sc:canvas") ||\n                    (item["type"] && item["type"].toLowerCase() === "canvas")) {\n                    // store the ids on the __jsonld object to be used by Range.getCanvasIds()\n                    if (!range.canvases) {\n                        range.canvases = [];\n                    }\n                    var id_1 = item.id || item["@id"];\n                    range.canvases.push(id_1);\n                }\n            }\n        }\n        else if (r.ranges) {\n            for (var i = 0; i < r.ranges.length; i++) {\n                this._parseRanges(r.ranges[i], path + "/" + i, range);\n            }\n        }\n    };\n    Manifest.prototype.getAllRanges = function () {\n        if (this._allRanges != null)\n            return this._allRanges;\n        this._allRanges = [];\n        var topRanges = this.getTopRanges();\n        var _loop_1 = function (i) {\n            var topRange = topRanges[i];\n            if (topRange.id) {\n                this_1._allRanges.push(topRange); // it might be a placeholder root range\n            }\n            var reducer = function (acc, next) {\n                acc.add(next);\n                var nextRanges = next.getRanges();\n                if (nextRanges.length) {\n                    return nextRanges.reduce(reducer, acc);\n                }\n                return acc;\n            };\n            var subRanges = Array.from(topRange.getRanges().reduce(reducer, new Set()));\n            this_1._allRanges = this_1._allRanges.concat(subRanges);\n        };\n        var this_1 = this;\n        for (var i = 0; i < topRanges.length; i++) {\n            _loop_1(i);\n        }\n        return this._allRanges;\n    };\n    Manifest.prototype.getRangeById = function (id) {\n        var ranges = this.getAllRanges();\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            if (range.id === id) {\n                return range;\n            }\n        }\n        return null;\n    };\n    Manifest.prototype.getRangeByPath = function (path) {\n        var ranges = this.getAllRanges();\n        for (var i = 0; i < ranges.length; i++) {\n            var range = ranges[i];\n            if (range.path === path) {\n                return range;\n            }\n        }\n        return null;\n    };\n    Manifest.prototype.getSequences = function () {\n        if (this.items.length) {\n            return this.items;\n        }\n        // IxIF mediaSequences overrode sequences, so need to be checked first.\n        // deprecate this when presentation 3 ships\n        var items = this.__jsonld.mediaSequences || this.__jsonld.sequences;\n        if (items) {\n            for (var i = 0; i < items.length; i++) {\n                var s = items[i];\n                var sequence = new internal_1.Sequence(s, this.options);\n                this.items.push(sequence);\n            }\n        }\n        else if (this.__jsonld.items) {\n            var sequence = new internal_1.Sequence(this.__jsonld.items, this.options);\n            this.items.push(sequence);\n        }\n        return this.items;\n    };\n    Manifest.prototype.getSequenceByIndex = function (sequenceIndex) {\n        return this.getSequences()[sequenceIndex];\n    };\n    Manifest.prototype.getTotalSequences = function () {\n        return this.getSequences().length;\n    };\n    Manifest.prototype.getManifestType = function () {\n        var service = (this.getService(dist_commonjs_1.ServiceProfile.UI_EXTENSIONS));\n        if (service) {\n            return service.getProperty("manifestType");\n        }\n        return internal_1.ManifestType.EMPTY;\n    };\n    Manifest.prototype.isMultiSequence = function () {\n        return this.getTotalSequences() > 1;\n    };\n    Manifest.prototype.isPagingEnabled = function () {\n        var viewingHint = this.getViewingHint();\n        if (viewingHint) {\n            return viewingHint === dist_commonjs_1.ViewingHint.PAGED;\n        }\n        var behavior = this.getBehavior();\n        if (behavior) {\n            return behavior === dist_commonjs_1.Behavior.PAGED;\n        }\n        return false;\n    };\n    Manifest.prototype.getViewingDirection = function () {\n        return this.getProperty("viewingDirection");\n    };\n    Manifest.prototype.getViewingHint = function () {\n        return this.getProperty("viewingHint");\n    };\n    return Manifest;\n}(internal_1.IIIFResource));\nexports.Manifest = Manifest;\n\n\n//# sourceURL=webpack://manifesto/./src/Manifest.ts?')},"./src/ManifestResource.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.ManifestResource = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar dist_commonjs_1 = __webpack_require__(/*! @iiif/vocabulary/dist-commonjs */ "./node_modules/@iiif/vocabulary/dist-commonjs/index.js");\nvar ManifestResource = /** @class */ (function (_super) {\n    __extends(ManifestResource, _super);\n    function ManifestResource(jsonld, options) {\n        var _this = _super.call(this, jsonld) || this;\n        _this.options = options;\n        return _this;\n    }\n    ManifestResource.prototype.getIIIFResourceType = function () {\n        return internal_1.Utils.normaliseType(this.getProperty("type"));\n    };\n    ManifestResource.prototype.getLabel = function () {\n        var label = this.getProperty("label");\n        if (label) {\n            return internal_1.PropertyValue.parse(label, this.options.locale);\n        }\n        return new internal_1.PropertyValue([], this.options.locale);\n    };\n    ManifestResource.prototype.getDefaultLabel = function () {\n        return this.getLabel().getValue(this.options.locale);\n    };\n    ManifestResource.prototype.getMetadata = function () {\n        var _metadata = this.getProperty("metadata");\n        var metadata = [];\n        if (!_metadata)\n            return metadata;\n        for (var i = 0; i < _metadata.length; i++) {\n            var item = _metadata[i];\n            var metadataItem = new internal_1.LabelValuePair(this.options.locale);\n            metadataItem.parse(item);\n            metadata.push(metadataItem);\n        }\n        return metadata;\n    };\n    ManifestResource.prototype.getRendering = function (format) {\n        var renderings = this.getRenderings();\n        for (var i = 0; i < renderings.length; i++) {\n            var rendering = renderings[i];\n            if (rendering.getFormat() === format) {\n                return rendering;\n            }\n        }\n        return null;\n    };\n    ManifestResource.prototype.getRenderings = function () {\n        var rendering;\n        // if passing a manifesto-parsed object, use the __jsonld.rendering property,\n        // otherwise look for a rendering property\n        if (this.__jsonld) {\n            rendering = this.__jsonld.rendering;\n        }\n        else {\n            rendering = this.rendering;\n        }\n        var renderings = [];\n        if (!rendering)\n            return renderings;\n        // coerce to array\n        if (!Array.isArray(rendering)) {\n            rendering = [rendering];\n        }\n        for (var i = 0; i < rendering.length; i++) {\n            var r = rendering[i];\n            renderings.push(new internal_1.Rendering(r, this.options));\n        }\n        return renderings;\n    };\n    ManifestResource.prototype.getRequiredStatement = function () {\n        var requiredStatement = null;\n        var _requiredStatement = this.getProperty("requiredStatement");\n        if (_requiredStatement) {\n            requiredStatement = new internal_1.LabelValuePair(this.options.locale);\n            requiredStatement.parse(_requiredStatement);\n        }\n        return requiredStatement;\n    };\n    ManifestResource.prototype.getService = function (profile) {\n        return internal_1.Utils.getService(this, profile);\n    };\n    ManifestResource.prototype.getServices = function () {\n        return internal_1.Utils.getServices(this);\n    };\n    ManifestResource.prototype.getThumbnail = function () {\n        var thumbnail = this.getProperty("thumbnail");\n        if (Array.isArray(thumbnail)) {\n            thumbnail = thumbnail[0];\n        }\n        if (thumbnail) {\n            return new internal_1.Thumbnail(thumbnail, this.options);\n        }\n        return null;\n    };\n    ManifestResource.prototype.isAnnotation = function () {\n        return this.getIIIFResourceType() === dist_commonjs_1.IIIFResourceType.ANNOTATION;\n    };\n    ManifestResource.prototype.isCanvas = function () {\n        return this.getIIIFResourceType() === dist_commonjs_1.IIIFResourceType.CANVAS;\n    };\n    ManifestResource.prototype.isCollection = function () {\n        return this.getIIIFResourceType() === dist_commonjs_1.IIIFResourceType.COLLECTION;\n    };\n    ManifestResource.prototype.isManifest = function () {\n        return this.getIIIFResourceType() === dist_commonjs_1.IIIFResourceType.MANIFEST;\n    };\n    ManifestResource.prototype.isRange = function () {\n        return this.getIIIFResourceType() === dist_commonjs_1.IIIFResourceType.RANGE;\n    };\n    // this different implementation is necessary until such time as the \n    // SCENE is added to the @iiif/vocabulary package.\n    ManifestResource.prototype.isScene = function () {\n        return this.getIIIFResourceType() === internal_1.Utils.normaliseType(\'Scene\');\n    };\n    ManifestResource.prototype.isSequence = function () {\n        return this.getIIIFResourceType() === dist_commonjs_1.IIIFResourceType.SEQUENCE;\n    };\n    return ManifestResource;\n}(internal_1.JSONLDResource));\nexports.ManifestResource = ManifestResource;\n\n\n//# sourceURL=webpack://manifesto/./src/ManifestResource.ts?')},"./src/ManifestType.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.ManifestType = void 0;\nvar ManifestType;\n(function (ManifestType) {\n    ManifestType["EMPTY"] = "";\n    ManifestType["MANUSCRIPT"] = "manuscript";\n    ManifestType["MONOGRAPH"] = "monograph";\n})(ManifestType || (exports.ManifestType = ManifestType = {}));\n\n\n//# sourceURL=webpack://manifesto/./src/ManifestType.ts?')},"./src/PointSelector.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.PointSelector = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar PointSelector = /** @class */ (function (_super) {\n    __extends(PointSelector, _super);\n    function PointSelector(jsonld) {\n        var _this = _super.call(this, jsonld) || this;\n        _this.isPointSelector = true;\n        return _this;\n    }\n    PointSelector.prototype.getLocation = function () {\n        return { x: Number(this.__jsonld.x),\n            y: Number(this.__jsonld.y),\n            z: Number(this.__jsonld.z)\n        };\n    };\n    return PointSelector;\n}(internal_1.JSONLDResource));\nexports.PointSelector = PointSelector;\n\n\n//# sourceURL=webpack://manifesto/./src/PointSelector.ts?')},"./src/PropertyValue.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.PropertyValue = exports.LocalizedValue = void 0;\nvar Utils_1 = __webpack_require__(/*! ./Utils */ "./src/Utils.ts");\n/** Utility class to hold one or more values with their associated (optional) locale */\nvar LocalizedValue = /** @class */ (function () {\n    function LocalizedValue(value, locale, defaultLocale) {\n        if (defaultLocale === void 0) { defaultLocale = "none"; }\n        if (Array.isArray(value) && value.length === 1) {\n            this._value = value[0];\n        }\n        else {\n            this._value = value;\n        }\n        if (locale === "none" || locale === "@none") {\n            locale = undefined;\n        }\n        this._locale = locale;\n        this._defaultLocale = defaultLocale;\n    }\n    /** Parse a localized value from a IIIF v2 property value\n     *\n     * @param {string | string[] | object | object[]} rawVal value from IIIF resource\n     * @param {string | undefined} defaultLocale deprecated: defaultLocale the default locale to use for this value\n     */\n    LocalizedValue.parseV2Value = function (rawVal, defaultLocale) {\n        if (typeof rawVal === "string") {\n            return new LocalizedValue(rawVal, undefined, defaultLocale);\n        }\n        else if (rawVal["@value"]) {\n            return new LocalizedValue(rawVal["@value"], rawVal["@language"], defaultLocale);\n        }\n        return null;\n    };\n    Object.defineProperty(LocalizedValue.prototype, "value", {\n        /*** @deprecated Use PropertyValue#getValue instead */\n        get: function () {\n            if (Array.isArray(this._value)) {\n                return this._value.join("<br/>");\n            }\n            return this._value;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(LocalizedValue.prototype, "locale", {\n        /*** @deprecated Don\'t use, only used for backwards compatibility reasons */\n        get: function () {\n            if (this._locale === undefined) {\n                return this._defaultLocale;\n            }\n            return this._locale;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LocalizedValue.prototype.addValue = function (value) {\n        if (!Array.isArray(this._value)) {\n            this._value = [this._value];\n        }\n        if (Array.isArray(value)) {\n            this._value = this._value.concat(value);\n        }\n        else {\n            this._value.push(value);\n        }\n    };\n    return LocalizedValue;\n}());\nexports.LocalizedValue = LocalizedValue;\n/***\n * Holds a collection of values and their (optional) languages and allows\n * language-based value retrieval as per the algorithm described in\n * https://iiif.io/api/presentation/2.1/#language-of-property-values\n */\nvar PropertyValue = /** @class */ (function (_super) {\n    __extends(PropertyValue, _super);\n    function PropertyValue(values, defaultLocale) {\n        if (values === void 0) { values = []; }\n        var _this = _super.apply(this, values) || this;\n        // Needed for ES5 compatibility, see https://stackoverflow.com/a/40967939\n        _this.__proto__ = PropertyValue.prototype;\n        _this._defaultLocale = defaultLocale;\n        return _this;\n    }\n    PropertyValue.parse = function (rawVal, defaultLocale) {\n        if (!rawVal) {\n            return new PropertyValue([], defaultLocale);\n        }\n        if (Array.isArray(rawVal)) {\n            // Collection of IIIF v2 property values\n            var parsed = rawVal\n                .map(function (v) { return LocalizedValue.parseV2Value(v, defaultLocale); })\n                .filter(function (v) { return v !== null; });\n            var byLocale = parsed.reduce(function (acc, lv) {\n                var loc = lv._locale;\n                if (!loc) {\n                    // Cannot use undefined as an object key\n                    loc = "none";\n                }\n                if (acc[loc]) {\n                    acc[loc].addValue(lv._value);\n                }\n                else {\n                    acc[loc] = lv;\n                }\n                return acc;\n            }, {});\n            return new PropertyValue(Object.values(byLocale), defaultLocale);\n        }\n        else if (typeof rawVal === "string") {\n            return new PropertyValue([new LocalizedValue(rawVal, undefined, defaultLocale)], defaultLocale);\n        }\n        else if (rawVal["@language"]) {\n            // Single IIIF v2 property value\n            var parsed = LocalizedValue.parseV2Value(rawVal);\n            return new PropertyValue(parsed !== null ? [parsed] : [], defaultLocale);\n        }\n        else if (rawVal["@value"]) {\n            // Single IIIF v2 property value without language\n            var parsed = LocalizedValue.parseV2Value(rawVal);\n            return new PropertyValue(parsed !== null ? [parsed] : [], defaultLocale);\n        }\n        else {\n            // IIIF v3 property value\n            return new PropertyValue(Object.keys(rawVal).map(function (locale) {\n                var val = rawVal[locale];\n                if (!Array.isArray(val)) {\n                    throw new Error("A IIIF v3 localized property value must have an array as the value for a given language.");\n                }\n                return new LocalizedValue(val, locale, defaultLocale);\n            }), defaultLocale);\n        }\n    };\n    /*** Try to find the available locale that best fit\'s the user\'s preferences. */\n    PropertyValue.prototype.getSuitableLocale = function (locales) {\n        // If any of the values have a language associated with them, the client\n        // must display all of the values associated with the language that best\n        // matches the language preference.\n        // create an array of the language codes for all different LocalizedValue instances in this PropertyValue\n        var allLocales = new Array();\n        for (var _i = 0, _a = this; _i < _a.length; _i++) {\n            var lv = _a[_i];\n            if (lv._locale != undefined)\n                allLocales.push(lv._locale);\n        }\n        var _loop_1 = function (userLocale) {\n            var matchingLocale = allLocales.find(function (l) { return l === userLocale; });\n            if (matchingLocale) {\n                return { value: matchingLocale };\n            }\n        };\n        // First, look for a precise match\n        for (var _b = 0, locales_1 = locales; _b < locales_1.length; _b++) {\n            var userLocale = locales_1[_b];\n            var state_1 = _loop_1(userLocale);\n            if (typeof state_1 === "object")\n                return state_1.value;\n        }\n        var _loop_2 = function (userLocale) {\n            var matchingLocale = allLocales.find(function (l) { return Utils_1.Utils.getInexactLocale(l) === Utils_1.Utils.getInexactLocale(userLocale); });\n            if (matchingLocale) {\n                return { value: matchingLocale };\n            }\n        };\n        // Look for an inexact match\n        for (var _c = 0, locales_2 = locales; _c < locales_2.length; _c++) {\n            var userLocale = locales_2[_c];\n            var state_2 = _loop_2(userLocale);\n            if (typeof state_2 === "object")\n                return state_2.value;\n        }\n        return undefined;\n    };\n    /**\n     * Set the value(s) for a given locale.\n     *\n     * If there\'s an existing locale that matches the given locale, it will be updated.\n     *\n     * @param locale Locale to set the value for\n     * @param value value to set\n     */\n    PropertyValue.prototype.setValue = function (value, locale) {\n        var existing = undefined;\n        if (!locale) {\n            existing = this.find(function (lv) { return lv._locale === undefined; });\n        }\n        else {\n            var bestLocale_1 = this.getSuitableLocale([locale]);\n            if (bestLocale_1) {\n                existing = this.find(function (lv) { return lv._locale === bestLocale_1; });\n            }\n        }\n        if (existing) {\n            // Mutate existing localized value\n            existing._value = value;\n        }\n        else {\n            // Create a new localized value\n            this.push(new LocalizedValue(value, locale, this._defaultLocale));\n        }\n    };\n    /**\n     * Get a value in the most suitable locale.\n     *\n     * @param {string | string[] | undefined} locales Desired locale, can be a list of\n     * locales sorted by descending priority.\n     * @param {string | undefined} joinWith String to join multiple available values by,\n     * if undefined only the first available value will be returned\n     * @returns the first value in the most suitable locale or null if none could be found\n     */\n    PropertyValue.prototype.getValue = function (locales, joinWith) {\n        var vals = this.getValues(locales);\n        if (vals.length === 0) {\n            return null;\n        }\n        if (joinWith) {\n            return vals.join(joinWith);\n        }\n        return vals[0];\n    };\n    /**\n     * Get all values available in the most suitable locale.\n     *\n     * @param {string | string[]} userLocales Desired locale, can be a list of\n     * locales sorted by descending priority.\n     * @returns the values for the most suitable locale, empty if none could be found\n     */\n    PropertyValue.prototype.getValues = function (userLocales) {\n        if (!this.length) {\n            return [];\n        }\n        var locales;\n        if (!userLocales) {\n            locales = [];\n        }\n        else if (!Array.isArray(userLocales)) {\n            locales = [userLocales];\n        }\n        else {\n            locales = userLocales;\n        }\n        // If none of the values have a language associated with them, the client\n        // must display all of the values.\n        if (this.length === 1 && this[0]._locale === undefined) {\n            var val = this[0]._value;\n            return Array.isArray(val) ? val : [val];\n        }\n        // Try to determine the available locale that best fits the user\'s preferences\n        var matchingLocale = this.getSuitableLocale(locales);\n        if (matchingLocale) {\n            var val = this.find(function (lv) { return lv._locale === matchingLocale; })._value;\n            return Array.isArray(val) ? val : [val];\n        }\n        // If all of the values have a language associated with them, and none match\n        // the language preference, the client must select a language and display\n        // all of the values associated with that language.\n        var allHaveLang = !this.find(function (lv) { return lv._locale === undefined; });\n        if (allHaveLang) {\n            var val = this[0]._value;\n            return Array.isArray(val) ? val : [val];\n        }\n        // If some of the values have a language associated with them, but none\n        // match the language preference, the client must display all of the values\n        // that do not have a language associated with them.\n        var lv = this.find(function (lv) { return lv._locale === undefined; });\n        if (lv) {\n            return Array.isArray(lv._value) ? lv._value : [lv._value];\n        }\n        return [];\n    };\n    return PropertyValue;\n}(Array));\nexports.PropertyValue = PropertyValue;\n\n\n//# sourceURL=webpack://manifesto/./src/PropertyValue.ts?')},"./src/Range.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Range = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar dist_commonjs_1 = __webpack_require__(/*! @iiif/vocabulary/dist-commonjs */ "./node_modules/@iiif/vocabulary/dist-commonjs/index.js");\nvar Range = /** @class */ (function (_super) {\n    __extends(Range, _super);\n    function Range(jsonld, options) {\n        var _this = _super.call(this, jsonld, options) || this;\n        _this._ranges = null;\n        _this.canvases = null;\n        _this.items = [];\n        return _this;\n    }\n    Range.prototype.getCanvasIds = function () {\n        if (this.__jsonld.canvases) {\n            return this.__jsonld.canvases;\n        }\n        else if (this.canvases) {\n            return this.canvases;\n        }\n        return [];\n    };\n    Range.prototype.getDuration = function () {\n        // For this implementation, we want to catch SOME of the temporal cases - i.e. when there is a t=1,100\n        if (this.canvases && this.canvases.length) {\n            var startTimes = [];\n            var endTimes = [];\n            // When we loop through all of the canvases we store the recorded start and end times.\n            // Then we choose the maximum and minimum values from this. This will give us a more accurate duration for the\n            // Chosen range. However this is still not perfect and does not cover more complex ranges. These cases are out of\n            // scope for this change.\n            for (var _i = 0, _a = this.canvases; _i < _a.length; _i++) {\n                var canvas = _a[_i];\n                if (!canvas)\n                    continue;\n                var _b = (canvas.match(/(.*)#t=([0-9.]+),?([0-9.]+)?/) || [undefined, canvas]), canvasId = _b[1], start_1 = _b[2], end_1 = _b[3];\n                if (canvasId) {\n                    startTimes.push(parseFloat(start_1));\n                    endTimes.push(parseFloat(end_1));\n                }\n            }\n            if (startTimes.length && endTimes.length) {\n                return new internal_1.Duration(Math.min.apply(Math, startTimes), Math.max.apply(Math, endTimes));\n            }\n        }\n        else {\n            // get child ranges and calculate the start and end based on them\n            var childRanges = this.getRanges();\n            var startTimes = [];\n            var endTimes = [];\n            // Once again, we use a max/min to get the ranges.\n            for (var _c = 0, childRanges_1 = childRanges; _c < childRanges_1.length; _c++) {\n                var childRange = childRanges_1[_c];\n                var duration = childRange.getDuration();\n                if (duration) {\n                    startTimes.push(duration.start);\n                    endTimes.push(duration.end);\n                }\n            }\n            // And return the minimum as the start, and the maximum as the end.\n            if (startTimes.length && endTimes.length) {\n                return new internal_1.Duration(Math.min.apply(Math, startTimes), Math.max.apply(Math, endTimes));\n            }\n        }\n        var start;\n        var end;\n        // There are 2 paths for this implementation. Either we have a list of canvases, or a list of ranges\n        // which may have a list of ranges.\n        // This is one of the limitations of this implementation.\n        if (this.canvases && this.canvases.length) {\n            // When we loop through each of the canvases we are expecting to see a fragment or a link to the whole canvas.\n            // For example - if we have http://example.org/canvas#t=1,100 it will extract 1 and 100 as the start and end.\n            for (var i = 0; i < this.canvases.length; i++) {\n                var canvas = this.canvases[i];\n                var temporal = internal_1.Utils.getTemporalComponent(canvas);\n                if (temporal && temporal.length > 1) {\n                    if (i === 0) {\n                        // Note: Cannot guarantee ranges are sequential (fixed above)\n                        start = Number(temporal[0]);\n                    }\n                    if (i === this.canvases.length - 1) {\n                        end = Number(temporal[1]); // Note: The end of this duration may be targeting a different canvas.\n                    }\n                }\n            }\n        }\n        else {\n            // In this second case, where there are nested ranges, we recursively get the duration\n            // from each of the child ranges (a start and end) and then choose the first and last for the bounds of this range.\n            var childRanges = this.getRanges();\n            for (var i = 0; i < childRanges.length; i++) {\n                var childRange = childRanges[i];\n                var duration = childRange.getDuration();\n                if (duration) {\n                    if (i === 0) {\n                        start = duration.start;\n                    }\n                    if (i === childRanges.length - 1) {\n                        end = duration.end;\n                    }\n                }\n            }\n        }\n        if (start !== undefined && end !== undefined) {\n            return new internal_1.Duration(start, end);\n        }\n        return undefined;\n    };\n    // getCanvases(): ICanvas[] {\n    //     if (this._canvases) {\n    //         return this._canvases;\n    //     }\n    //     return this._canvases = <ICanvas[]>this.items.en().where(m => m.isCanvas()).toArray();\n    // }\n    Range.prototype.getRanges = function () {\n        if (this._ranges) {\n            return this._ranges;\n        }\n        return (this._ranges = this.items.filter(function (m) { return m.isRange(); }));\n    };\n    Range.prototype.getBehavior = function () {\n        var behavior = this.getProperty("behavior");\n        if (Array.isArray(behavior)) {\n            behavior = behavior[0];\n        }\n        if (behavior) {\n            return behavior;\n        }\n        return null;\n    };\n    Range.prototype.getViewingDirection = function () {\n        return this.getProperty("viewingDirection");\n    };\n    Range.prototype.getViewingHint = function () {\n        return this.getProperty("viewingHint");\n    };\n    Range.prototype.getTree = function (treeRoot) {\n        treeRoot.data = this;\n        this.treeNode = treeRoot;\n        var ranges = this.getRanges();\n        if (ranges && ranges.length) {\n            for (var i = 0; i < ranges.length; i++) {\n                var range = ranges[i];\n                var node = new internal_1.TreeNode();\n                treeRoot.addNode(node);\n                this._parseTreeNode(node, range);\n            }\n        }\n        internal_1.Utils.generateTreeNodeIds(treeRoot);\n        return treeRoot;\n    };\n    Range.prototype.spansTime = function (time) {\n        var duration = this.getDuration();\n        if (duration) {\n            if (time >= duration.start && time <= duration.end) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Range.prototype._parseTreeNode = function (node, range) {\n        node.label = range.getLabel().getValue(this.options.locale);\n        node.data = range;\n        node.data.type = internal_1.Utils.normaliseType(internal_1.TreeNodeType.RANGE);\n        range.treeNode = node;\n        var ranges = range.getRanges();\n        if (ranges && ranges.length) {\n            for (var i = 0; i < ranges.length; i++) {\n                var childRange = ranges[i];\n                var behavior = childRange.getBehavior();\n                if (behavior === dist_commonjs_1.Behavior.NO_NAV) {\n                    continue;\n                }\n                else {\n                    var childNode = new internal_1.TreeNode();\n                    node.addNode(childNode);\n                    this._parseTreeNode(childNode, childRange);\n                }\n            }\n        }\n    };\n    return Range;\n}(internal_1.ManifestResource));\nexports.Range = Range;\n\n\n//# sourceURL=webpack://manifesto/./src/Range.ts?')},"./src/Rendering.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Rendering = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Rendering = /** @class */ (function (_super) {\n    __extends(Rendering, _super);\n    function Rendering(jsonld, options) {\n        return _super.call(this, jsonld, options) || this;\n    }\n    Rendering.prototype.getFormat = function () {\n        return this.getProperty("format");\n    };\n    return Rendering;\n}(internal_1.ManifestResource));\nexports.Rendering = Rendering;\n\n\n//# sourceURL=webpack://manifesto/./src/Rendering.ts?')},"./src/Resource.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Resource = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Resource = /** @class */ (function (_super) {\n    __extends(Resource, _super);\n    function Resource(jsonld, options) {\n        return _super.call(this, jsonld, options) || this;\n    }\n    Resource.prototype.getFormat = function () {\n        var format = this.getProperty("format");\n        if (format) {\n            return format.toLowerCase();\n        }\n        return null;\n    };\n    Resource.prototype.getResources = function () {\n        var resources = [];\n        if (!this.__jsonld.resources)\n            return resources;\n        for (var i = 0; i < this.__jsonld.resources.length; i++) {\n            var a = this.__jsonld.resources[i];\n            var annotation = new internal_1.Annotation(a, this.options);\n            resources.push(annotation);\n        }\n        return resources;\n    };\n    Resource.prototype.getType = function () {\n        var type = this.getProperty("type");\n        if (type) {\n            return internal_1.Utils.normaliseType(type);\n        }\n        return null;\n    };\n    Resource.prototype.getWidth = function () {\n        return this.getProperty("width");\n    };\n    Resource.prototype.getHeight = function () {\n        return this.getProperty("height");\n    };\n    Resource.prototype.getMaxWidth = function () {\n        return this.getProperty("maxWidth");\n    };\n    Resource.prototype.getMaxHeight = function () {\n        var maxHeight = this.getProperty("maxHeight");\n        // if a maxHeight hasn\'t been specified, default to maxWidth.\n        // maxWidth in essence becomes maxEdge\n        if (!maxHeight) {\n            return this.getMaxWidth();\n        }\n        return null;\n    };\n    return Resource;\n}(internal_1.ManifestResource));\nexports.Resource = Resource;\n\n\n//# sourceURL=webpack://manifesto/./src/Resource.ts?')},"./src/RotateTransform.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.RotateTransform = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar RotateTransform = /** @class */ (function (_super) {\n    __extends(RotateTransform, _super);\n    function RotateTransform(jsonld) {\n        var _this = _super.call(this, jsonld) || this;\n        _this.isRotateTransform = true;\n        return _this;\n    }\n    RotateTransform.prototype.getRotation = function () {\n        var retVal = {};\n        for (var _i = 0, _a = ["x", "y", "z"]; _i < _a.length; _i++) {\n            var attrib = _a[_i];\n            var raw = this.__jsonld[attrib];\n            retVal[attrib] = (raw !== undefined) ? Number(raw) : 0.0;\n        }\n        return retVal;\n    };\n    return RotateTransform;\n}(internal_1.Transform));\nexports.RotateTransform = RotateTransform;\n;\n\n\n//# sourceURL=webpack://manifesto/./src/RotateTransform.ts?')},"./src/ScaleTransform.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.ScaleTransform = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar ScaleTransform = /** @class */ (function (_super) {\n    __extends(ScaleTransform, _super);\n    function ScaleTransform(jsonld) {\n        var _this = _super.call(this, jsonld) || this;\n        _this.isScaleTransform = true;\n        return _this;\n    }\n    ScaleTransform.prototype.getScale = function () {\n        var retVal = {};\n        for (var _i = 0, _a = ["x", "y", "z"]; _i < _a.length; _i++) {\n            var attrib = _a[_i];\n            var raw = this.__jsonld[attrib];\n            // note that default scaling is 1.0\n            retVal[attrib] = (raw !== undefined) ? Number(raw) : 1.0;\n        }\n        return retVal;\n    };\n    return ScaleTransform;\n}(internal_1.Transform));\nexports.ScaleTransform = ScaleTransform;\n;\n\n\n//# sourceURL=webpack://manifesto/./src/ScaleTransform.ts?')},"./src/Scene.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Scene = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Scene = /** @class */ (function (_super) {\n    __extends(Scene, _super);\n    function Scene(jsonld, options) {\n        return _super.call(this, jsonld, options) || this;\n    }\n    // Presentation API 3.0\n    Scene.prototype.getContent = function () {\n        var content = [];\n        var items = this.__jsonld.items || this.__jsonld.content;\n        if (!items)\n            return content;\n        // should be contained in an AnnotationPage\n        var annotationPage = null;\n        if (items.length) {\n            annotationPage = new internal_1.AnnotationPage(items[0], this.options);\n        }\n        if (!annotationPage) {\n            return content;\n        }\n        var annotations = annotationPage.getItems();\n        for (var i = 0; i < annotations.length; i++) {\n            var a = annotations[i];\n            var annotation = new internal_1.Annotation(a, this.options);\n            content.push(annotation);\n        }\n        ;\n        return content;\n    };\n    ;\n    Scene.prototype.getBackgroundColor = function () {\n        // regular expression intended to match strings like\n        // "#FF00FF" -- interpreted as three hexadecimal values\n        // in range 0-255 . Not that the \\w escape matches digits,\n        // upper and lower case latin characters, and underscore\n        var regexPattern = "\\#(\\\\w{2})(\\\\w{2})(\\\\w{2})";\n        var hexColorFormat = new RegExp(regexPattern);\n        var backgroundColorValue = this.__jsonld.backgroundColor;\n        if (backgroundColorValue && typeof (backgroundColorValue) == \'string\') {\n            var matchResult = backgroundColorValue.match(hexColorFormat);\n            if (matchResult) {\n                return {\n                    red: parseInt(matchResult[1], 16),\n                    green: parseInt(matchResult[2], 16),\n                    blue: parseInt(matchResult[3], 16)\n                };\n            }\n        }\n        return undefined;\n    };\n    ;\n    return Scene;\n}(internal_1.ManifestResource));\nexports.Scene = Scene;\n\n\n//# sourceURL=webpack://manifesto/./src/Scene.ts?')},"./src/Sequence.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Sequence = void 0;\nvar dist_commonjs_1 = __webpack_require__(/*! @iiif/vocabulary/dist-commonjs */ "./node_modules/@iiif/vocabulary/dist-commonjs/index.js");\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Sequence = /** @class */ (function (_super) {\n    __extends(Sequence, _super);\n    function Sequence(jsonld, options) {\n        var _this = _super.call(this, jsonld, options) || this;\n        _this.items = [];\n        _this._thumbnails = null;\n        return _this;\n    }\n    Sequence.prototype.getCanvases = function () {\n        if (this.items.length) {\n            return this.items;\n        }\n        var items = this.__jsonld.canvases || this.__jsonld.elements;\n        if (items) {\n            for (var i = 0; i < items.length; i++) {\n                var c = items[i];\n                var canvas = new internal_1.Canvas(c, this.options);\n                canvas.index = i;\n                this.items.push(canvas);\n            }\n        }\n        else if (this.__jsonld) {\n            for (var i = 0; i < this.__jsonld.length; i++) {\n                var c = this.__jsonld[i];\n                var canvas = new internal_1.Canvas(c, this.options);\n                canvas.index = i;\n                this.items.push(canvas);\n            }\n        }\n        return this.items;\n    };\n    Sequence.prototype.getCanvasById = function (id) {\n        for (var i = 0; i < this.getTotalCanvases(); i++) {\n            var canvas = this.getCanvasByIndex(i);\n            // normalise canvas id\n            var canvasId = internal_1.Utils.normaliseUrl(canvas.id);\n            if (internal_1.Utils.normaliseUrl(id) === canvasId) {\n                return canvas;\n            }\n        }\n        return null;\n    };\n    Sequence.prototype.getCanvasByIndex = function (canvasIndex) {\n        return this.getCanvases()[canvasIndex];\n    };\n    Sequence.prototype.getCanvasIndexById = function (id) {\n        for (var i = 0; i < this.getTotalCanvases(); i++) {\n            var canvas = this.getCanvasByIndex(i);\n            if (canvas.id === id) {\n                return i;\n            }\n        }\n        return null;\n    };\n    Sequence.prototype.getCanvasIndexByLabel = function (label, foliated) {\n        label = label.trim();\n        if (!isNaN(label)) {\n            // if the label is numeric\n            label = parseInt(label, 10).toString(); // trim any preceding zeros.\n            if (foliated)\n                label += "r"; // default to recto\n        }\n        var doublePageRegExp = /(\\d*)\\D+(\\d*)/;\n        var match, regExp, regStr, labelPart1, labelPart2;\n        for (var i = 0; i < this.getTotalCanvases(); i++) {\n            var canvas = this.getCanvasByIndex(i);\n            // check if there\'s a literal match\n            if (canvas.getLabel().getValue(this.options.locale) === label) {\n                return i;\n            }\n            // check if there\'s a match for double-page spreads e.g. 100-101, 100_101, 100 101\n            match = doublePageRegExp.exec(label);\n            if (!match)\n                continue;\n            labelPart1 = match[1];\n            labelPart2 = match[2];\n            if (!labelPart2)\n                continue;\n            regStr = "^" + labelPart1 + "\\\\D+" + labelPart2 + "$";\n            regExp = new RegExp(regStr);\n            if (regExp.test(canvas.getLabel().toString())) {\n                return i;\n            }\n        }\n        return -1;\n    };\n    Sequence.prototype.getLastCanvasLabel = function (alphanumeric) {\n        for (var i = this.getTotalCanvases() - 1; i >= 0; i--) {\n            var canvas = this.getCanvasByIndex(i);\n            var label = (canvas.getLabel().getValue(this.options.locale));\n            if (alphanumeric) {\n                var regExp = /^[a-zA-Z0-9]*$/;\n                if (regExp.test(label)) {\n                    return label;\n                }\n            }\n            else if (label) {\n                return label;\n            }\n        }\n        return this.options.defaultLabel;\n    };\n    Sequence.prototype.getLastPageIndex = function () {\n        return this.getTotalCanvases() - 1;\n    };\n    Sequence.prototype.getNextPageIndex = function (canvasIndex, pagingEnabled) {\n        var index;\n        if (pagingEnabled) {\n            var indices = this.getPagedIndices(canvasIndex);\n            var viewingDirection = this.getViewingDirection();\n            if (viewingDirection &&\n                viewingDirection === dist_commonjs_1.ViewingDirection.RIGHT_TO_LEFT) {\n                index = indices[0] + 1;\n            }\n            else {\n                index = indices[indices.length - 1] + 1;\n            }\n        }\n        else {\n            index = canvasIndex + 1;\n        }\n        if (index > this.getLastPageIndex()) {\n            return -1;\n        }\n        return index;\n    };\n    Sequence.prototype.getPagedIndices = function (canvasIndex, pagingEnabled) {\n        var indices = [];\n        if (!pagingEnabled) {\n            indices.push(canvasIndex);\n        }\n        else {\n            if (this.isFirstCanvas(canvasIndex) || this.isLastCanvas(canvasIndex)) {\n                indices = [canvasIndex];\n            }\n            else if (canvasIndex % 2) {\n                indices = [canvasIndex, canvasIndex + 1];\n            }\n            else {\n                indices = [canvasIndex - 1, canvasIndex];\n            }\n            var viewingDirection = this.getViewingDirection();\n            if (viewingDirection &&\n                viewingDirection === dist_commonjs_1.ViewingDirection.RIGHT_TO_LEFT) {\n                indices = indices.reverse();\n            }\n        }\n        return indices;\n    };\n    Sequence.prototype.getPrevPageIndex = function (canvasIndex, pagingEnabled) {\n        var index;\n        if (pagingEnabled) {\n            var indices = this.getPagedIndices(canvasIndex);\n            var viewingDirection = this.getViewingDirection();\n            if (viewingDirection &&\n                viewingDirection === dist_commonjs_1.ViewingDirection.RIGHT_TO_LEFT) {\n                index = indices[indices.length - 1] - 1;\n            }\n            else {\n                index = indices[0] - 1;\n            }\n        }\n        else {\n            index = canvasIndex - 1;\n        }\n        return index;\n    };\n    Sequence.prototype.getScenes = function () {\n        var returnVal = [];\n        var low_items = this.__jsonld.elements || this.__jsonld;\n        if (low_items) {\n            for (var i = 0; i < low_items.length; ++i) {\n                var c = low_items[i];\n                if (c.type === \'Scene\') {\n                    var scene = new internal_1.Scene(c, this.options);\n                    //scene.index = i;\n                    returnVal.push(scene);\n                }\n            }\n        }\n        return returnVal;\n    };\n    Sequence.prototype.getStartCanvasIndex = function () {\n        var startCanvas = this.getStartCanvas();\n        if (startCanvas) {\n            // if there\'s a startCanvas attribute, loop through the canvases and return the matching index.\n            for (var i = 0; i < this.getTotalCanvases(); i++) {\n                var canvas = this.getCanvasByIndex(i);\n                if (canvas.id === startCanvas)\n                    return i;\n            }\n        }\n        // default to first canvas.\n        return 0;\n    };\n    // todo: deprecate\n    Sequence.prototype.getThumbs = function (width, height) {\n        //console.warn(\'getThumbs will be deprecated, use getThumbnails instead\');\n        var thumbs = [];\n        var totalCanvases = this.getTotalCanvases();\n        for (var i = 0; i < totalCanvases; i++) {\n            var canvas = this.getCanvasByIndex(i);\n            var thumb = new internal_1.Thumb(width, canvas);\n            thumbs.push(thumb);\n        }\n        return thumbs;\n    };\n    Sequence.prototype.getThumbnails = function () {\n        if (this._thumbnails != null)\n            return this._thumbnails;\n        this._thumbnails = [];\n        var canvases = this.getCanvases();\n        for (var i = 0; i < canvases.length; i++) {\n            var thumbnail = canvases[i].getThumbnail();\n            if (thumbnail) {\n                this._thumbnails.push(thumbnail);\n            }\n        }\n        return this._thumbnails;\n    };\n    Sequence.prototype.getStartCanvas = function () {\n        return this.getProperty("startCanvas");\n    };\n    Sequence.prototype.getTotalCanvases = function () {\n        return this.getCanvases().length;\n    };\n    Sequence.prototype.getViewingDirection = function () {\n        if (this.getProperty("viewingDirection")) {\n            return this.getProperty("viewingDirection");\n        }\n        else if (this.options.resource.getViewingDirection) {\n            return this.options.resource.getViewingDirection();\n        }\n        return null;\n    };\n    Sequence.prototype.getViewingHint = function () {\n        return this.getProperty("viewingHint");\n    };\n    Sequence.prototype.isCanvasIndexOutOfRange = function (canvasIndex) {\n        return canvasIndex > this.getTotalCanvases() - 1;\n    };\n    Sequence.prototype.isFirstCanvas = function (canvasIndex) {\n        return canvasIndex === 0;\n    };\n    Sequence.prototype.isLastCanvas = function (canvasIndex) {\n        return canvasIndex === this.getTotalCanvases() - 1;\n    };\n    Sequence.prototype.isMultiCanvas = function () {\n        return this.getTotalCanvases() > 1;\n    };\n    Sequence.prototype.isPagingEnabled = function () {\n        var viewingHint = this.getViewingHint();\n        if (viewingHint) {\n            return viewingHint === dist_commonjs_1.ViewingHint.PAGED;\n        }\n        return false;\n    };\n    // checks if the number of canvases is even - therefore has a front and back cover\n    Sequence.prototype.isTotalCanvasesEven = function () {\n        return this.getTotalCanvases() % 2 === 0;\n    };\n    return Sequence;\n}(internal_1.ManifestResource));\nexports.Sequence = Sequence;\n\n\n//# sourceURL=webpack://manifesto/./src/Sequence.ts?')},"./src/Serialisation.ts":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Deserialiser = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Deserialiser = /** @class */ (function () {\n    function Deserialiser() {\n    }\n    Deserialiser.parse = function (manifest, options) {\n        if (typeof manifest === "string") {\n            manifest = JSON.parse(manifest);\n        }\n        return this.parseJson(manifest, options);\n    };\n    Deserialiser.parseJson = function (json, options) {\n        var resource;\n        // have options been passed for the manifest to inherit?\n        if (options) {\n            if (options.navDate && !isNaN(options.navDate.getTime())) {\n                json.navDate = options.navDate.toString();\n            }\n        }\n        if (json["@type"]) {\n            switch (json["@type"]) {\n                case "sc:Collection":\n                    resource = this.parseCollection(json, options);\n                    break;\n                case "sc:Manifest":\n                    resource = this.parseManifest(json, options);\n                    break;\n                default:\n                    return null;\n            }\n        }\n        else {\n            // presentation 3\n            switch (json["type"]) {\n                case "Collection":\n                    resource = this.parseCollection(json, options);\n                    break;\n                case "Manifest":\n                    resource = this.parseManifest(json, options);\n                    break;\n                default:\n                    return null;\n            }\n        }\n        // Top-level resource was loaded from a URI, so flag it to prevent\n        // unnecessary reload:\n        resource.isLoaded = true;\n        return resource;\n    };\n    Deserialiser.parseCollection = function (json, options) {\n        var collection = new internal_1.Collection(json, options);\n        if (options) {\n            collection.index = options.index || 0;\n            if (options.resource) {\n                collection.parentCollection = options.resource.parentCollection;\n            }\n        }\n        else {\n            collection.index = 0;\n        }\n        this.parseCollections(collection, options);\n        this.parseManifests(collection, options);\n        this.parseItems(collection, options);\n        return collection;\n    };\n    Deserialiser.parseCollections = function (collection, options) {\n        var items;\n        if (collection.__jsonld.collections) {\n            items = collection.__jsonld.collections;\n        }\n        else if (collection.__jsonld.items) {\n            items = collection.__jsonld.items.filter(function (m) { return m.type.toLowerCase() === "collection"; });\n        }\n        if (items) {\n            for (var i = 0; i < items.length; i++) {\n                if (options) {\n                    options.index = i;\n                }\n                var item = this.parseCollection(items[i], options);\n                item.index = i;\n                item.parentCollection = collection;\n                collection.items.push(item);\n            }\n        }\n    };\n    Deserialiser.parseManifest = function (json, options) {\n        var manifest = new internal_1.Manifest(json, options);\n        return manifest;\n    };\n    Deserialiser.parseManifests = function (collection, options) {\n        var items;\n        if (collection.__jsonld.manifests) {\n            items = collection.__jsonld.manifests;\n        }\n        else if (collection.__jsonld.items) {\n            items = collection.__jsonld.items.filter(function (m) { return m.type.toLowerCase() === "manifest"; });\n        }\n        if (items) {\n            for (var i = 0; i < items.length; i++) {\n                var item = this.parseManifest(items[i], options);\n                item.index = i;\n                item.parentCollection = collection;\n                collection.items.push(item);\n            }\n        }\n    };\n    Deserialiser.parseItem = function (json, options) {\n        if (json["@type"]) {\n            if (json["@type"].toLowerCase() === "sc:manifest") {\n                return this.parseManifest(json, options);\n            }\n            else if (json["@type"].toLowerCase() === "sc:collection") {\n                return this.parseCollection(json, options);\n            }\n        }\n        else if (json.type) {\n            if (json.type.toLowerCase() === "manifest") {\n                return this.parseManifest(json, options);\n            }\n            else if (json.type.toLowerCase() === "collection") {\n                return this.parseCollection(json, options);\n            }\n        }\n        return null;\n    };\n    Deserialiser.parseItems = function (collection, options) {\n        var items = collection.__jsonld.members || collection.__jsonld.items;\n        if (items) {\n            var _loop_1 = function (i) {\n                if (options) {\n                    options.index = i;\n                }\n                var item = this_1.parseItem(items[i], options);\n                if (!item)\n                    return { value: void 0 };\n                // only add to items if not already parsed from backwards-compatible collections/manifests arrays\n                if (collection.items.filter(function (m) { return m.id === item.id; })[0]) {\n                    return "continue";\n                }\n                item.index = i;\n                item.parentCollection = collection;\n                collection.items.push(item);\n            };\n            var this_1 = this;\n            for (var i = 0; i < items.length; i++) {\n                var state_1 = _loop_1(i);\n                if (typeof state_1 === "object")\n                    return state_1.value;\n            }\n        }\n    };\n    return Deserialiser;\n}());\nexports.Deserialiser = Deserialiser;\n\n\n//# sourceURL=webpack://manifesto/./src/Serialisation.ts?')},"./src/Service.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Service = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Service = /** @class */ (function (_super) {\n    __extends(Service, _super);\n    function Service(jsonld, options) {\n        return _super.call(this, jsonld, options) || this;\n    }\n    Service.prototype.getProfile = function () {\n        var profile = this.getProperty("profile");\n        if (!profile) {\n            profile = this.getProperty("dcterms:conformsTo");\n        }\n        if (Array.isArray(profile)) {\n            return profile[0];\n        }\n        return profile;\n    };\n    Service.prototype.getConfirmLabel = function () {\n        return internal_1.Utils.getLocalisedValue(this.getProperty("confirmLabel"), this.options.locale);\n    };\n    Service.prototype.getDescription = function () {\n        return internal_1.Utils.getLocalisedValue(this.getProperty("description"), this.options.locale);\n    };\n    Service.prototype.getFailureDescription = function () {\n        return internal_1.Utils.getLocalisedValue(this.getProperty("failureDescription"), this.options.locale);\n    };\n    Service.prototype.getFailureHeader = function () {\n        return internal_1.Utils.getLocalisedValue(this.getProperty("failureHeader"), this.options.locale);\n    };\n    Service.prototype.getHeader = function () {\n        return internal_1.Utils.getLocalisedValue(this.getProperty("header"), this.options.locale);\n    };\n    Service.prototype.getServiceLabel = function () {\n        return internal_1.Utils.getLocalisedValue(this.getProperty("label"), this.options.locale);\n    };\n    Service.prototype.getInfoUri = function () {\n        var infoUri = this.id;\n        if (!infoUri.endsWith("/")) {\n            infoUri += "/";\n        }\n        infoUri += "info.json";\n        return infoUri;\n    };\n    return Service;\n}(internal_1.ManifestResource));\nexports.Service = Service;\n\n\n//# sourceURL=webpack://manifesto/./src/Service.ts?')},"./src/Size.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Size = void 0;\nvar Size = /** @class */ (function () {\n    function Size(width, height) {\n        this.width = width;\n        this.height = height;\n    }\n    return Size;\n}());\nexports.Size = Size;\n\n\n//# sourceURL=webpack://manifesto/./src/Size.ts?')},"./src/SpecificResource.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.SpecificResource = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\n/**\n    Developer note: This implementation does not strictly adhere\n    to the description of SpecificResource in the Web Annotation Model\n    document https://www.w3.org/TR/annotation-model/\n    section 4 : https://www.w3.org/TR/annotation-model/#specific-resources\n    \n    In particular, this class is abstract and the 3D subclasses\n    will have distinct function signatures\n*/\nvar SpecificResource = /** @class */ (function (_super) {\n    __extends(SpecificResource, _super);\n    function SpecificResource(jsonld, options) {\n        var _this = _super.call(this, jsonld) || this;\n        _this.isSpecificResource = true;\n        _this.options = options;\n        return _this;\n    }\n    return SpecificResource;\n}(internal_1.JSONLDResource));\nexports.SpecificResource = SpecificResource;\n\n\n//# sourceURL=webpack://manifesto/./src/SpecificResource.ts?')},"./src/SpecificResourceForBody.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.SpecificResourceForBody = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\n/**\n    This (subclass/implementation) of SpecificResource\n    satisfies requirements of the body of a 3D annotation\n    \n    \n*/\nvar SpecificResourceForBody = /** @class */ (function (_super) {\n    __extends(SpecificResourceForBody, _super);\n    function SpecificResourceForBody() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    SpecificResourceForBody.prototype.getSource = function () {\n        var raw = this.getProperty("source");\n        if (raw) {\n            var item = ([].concat(raw))[0];\n            if (item) {\n                return new internal_1.AnnotationBody(item);\n            }\n        }\n        throw new Error("cannot resolve Source " + JSON.stringify(raw));\n    };\n    SpecificResourceForBody.prototype.getTransform = function () {\n        var retVal = [];\n        var transformItems = this.getProperty("transform");\n        for (var i = 0; i < transformItems.length; ++i) {\n            var transformItem = transformItems[i];\n            retVal.push(internal_1.TransformParser.BuildFromJson(transformItem));\n        }\n        return retVal;\n    };\n    SpecificResourceForBody.prototype.getSelector = function () {\n        return undefined;\n    };\n    return SpecificResourceForBody;\n}(internal_1.SpecificResource));\nexports.SpecificResourceForBody = SpecificResourceForBody;\n\n\n//# sourceURL=webpack://manifesto/./src/SpecificResourceForBody.ts?')},"./src/SpecificResourceForTarget.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.SpecificResourceForTarget = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\n/**\n    This (subclass/implementation) of SpecificResource\n    satisfies requirements to the target of a 3D annotation\n    \n    It will have a PointSelector as a selector property\n    and a string (the URI of a Scene ) as its source\n*/\nvar SpecificResourceForTarget = /** @class */ (function (_super) {\n    __extends(SpecificResourceForTarget, _super);\n    function SpecificResourceForTarget() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /*\n    options: IManifestoOptions;\n    \n    isSpecificResource : boolean = true;\n  \n    constructor(jsonld: any, options?: IManifestoOptions) {\n      super(jsonld);\n      this.options = <IManifestoOptions>options;\n    }\n    */\n    SpecificResourceForTarget.prototype.getSource = function () {\n        var raw = this.getProperty("source");\n        if (raw) {\n            var item = ([].concat(raw))[0];\n            if (item) {\n                if (typeof (item) === "string")\n                    return item;\n                else {\n                    var id = item["id"];\n                    if (typeof (id) === "string")\n                        return id;\n                }\n            }\n        }\n        throw new Error("cannot resolve Source " + JSON.stringify(raw));\n    };\n    /**\n    Developer note: Not allowing the getSelector to be undefined\n    */\n    SpecificResourceForTarget.prototype.getSelector = function () {\n        var raw = this.getProperty("selector");\n        if (raw) {\n            var item = ([].concat(raw))[0];\n            if (item) {\n                if (item["type"] === "PointSelector")\n                    return new internal_1.PointSelector(item);\n            }\n        }\n        throw new Error("unable to resolve SpecificResource selector " + JSON.stringify(this.__jsonld));\n    };\n    return SpecificResourceForTarget;\n}(internal_1.SpecificResource));\nexports.SpecificResourceForTarget = SpecificResourceForTarget;\n\n\n//# sourceURL=webpack://manifesto/./src/SpecificResourceForTarget.ts?')},"./src/StatusCode.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.StatusCode = void 0;\nvar StatusCode;\n(function (StatusCode) {\n    StatusCode[StatusCode["AUTHORIZATION_FAILED"] = 1] = "AUTHORIZATION_FAILED";\n    StatusCode[StatusCode["FORBIDDEN"] = 2] = "FORBIDDEN";\n    StatusCode[StatusCode["INTERNAL_SERVER_ERROR"] = 3] = "INTERNAL_SERVER_ERROR";\n    StatusCode[StatusCode["RESTRICTED"] = 4] = "RESTRICTED";\n})(StatusCode || (exports.StatusCode = StatusCode = {}));\n\n\n//# sourceURL=webpack://manifesto/./src/StatusCode.ts?')},"./src/Thumb.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Thumb = void 0;\n// todo: deprecate\n// this is used by Sequence.getThumbs\nvar Thumb = /** @class */ (function () {\n    function Thumb(width, canvas) {\n        this.data = canvas;\n        this.index = canvas.index;\n        this.width = width;\n        var heightRatio = canvas.getHeight() / canvas.getWidth();\n        if (heightRatio) {\n            this.height = Math.floor(this.width * heightRatio);\n        }\n        else {\n            this.height = width;\n        }\n        this.uri = canvas.getCanonicalImageUri(width);\n        this.label = canvas.getLabel().getValue(); // todo: pass locale?\n        this.viewingHint = canvas.getViewingHint();\n    }\n    return Thumb;\n}());\nexports.Thumb = Thumb;\n\n\n//# sourceURL=webpack://manifesto/./src/Thumb.ts?')},"./src/Thumbnail.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Thumbnail = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Thumbnail = /** @class */ (function (_super) {\n    __extends(Thumbnail, _super);\n    function Thumbnail(jsonld, options) {\n        return _super.call(this, jsonld, options) || this;\n    }\n    return Thumbnail;\n}(internal_1.Resource));\nexports.Thumbnail = Thumbnail;\n\n\n//# sourceURL=webpack://manifesto/./src/Thumbnail.ts?')},"./src/Transform.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Transform = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar Transform = /** @class */ (function (_super) {\n    __extends(Transform, _super);\n    function Transform(jsonld) {\n        var _this = _super.call(this, jsonld) || this;\n        _this.isTransform = true;\n        _this.isTransform = true;\n        return _this;\n    }\n    return Transform;\n}(internal_1.JSONLDResource));\nexports.Transform = Transform;\n\n\n//# sourceURL=webpack://manifesto/./src/Transform.ts?')},"./src/TransformParser.ts":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.TransformParser = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar TransformParser = /** @class */ (function () {\n    function TransformParser() {\n    }\n    TransformParser.BuildFromJson = function (jsonld) {\n        if (jsonld.type === "TranslateTransform")\n            return new internal_1.TranslateTransform(jsonld);\n        else if (jsonld.type === "RotateTransform")\n            return new internal_1.RotateTransform(jsonld);\n        else if (jsonld.type === "ScaleTransform")\n            return new internal_1.ScaleTransform(jsonld);\n        else\n            throw new Error("Unknown transform type " + jsonld.type);\n    };\n    return TransformParser;\n}());\nexports.TransformParser = TransformParser;\n\n\n//# sourceURL=webpack://manifesto/./src/TransformParser.ts?')},"./src/TranslateTransform.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== "function" && b !== null)\n            throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.TranslateTransform = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar TranslateTransform = /** @class */ (function (_super) {\n    __extends(TranslateTransform, _super);\n    function TranslateTransform(jsonld) {\n        var _this = _super.call(this, jsonld) || this;\n        _this.isTranslateTransform = true;\n        return _this;\n    }\n    TranslateTransform.prototype.getTranslation = function () {\n        var retVal = {};\n        for (var _i = 0, _a = ["x", "y", "z"]; _i < _a.length; _i++) {\n            var attrib = _a[_i];\n            var raw = this.__jsonld[attrib];\n            retVal[attrib] = (raw !== undefined) ? Number(raw) : 0.0;\n        }\n        return retVal;\n    };\n    return TranslateTransform;\n}(internal_1.Transform));\nexports.TranslateTransform = TranslateTransform;\n;\n\n\n//# sourceURL=webpack://manifesto/./src/TranslateTransform.ts?')},"./src/TreeNode.ts":(__unused_webpack_module,exports,__webpack_require__)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.TreeNode = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar TreeNode = /** @class */ (function () {\n    function TreeNode(label, data) {\n        this.label = label;\n        this.data = data || {};\n        this.nodes = [];\n    }\n    TreeNode.prototype.addNode = function (node) {\n        this.nodes.push(node);\n        node.parentNode = this;\n    };\n    TreeNode.prototype.isCollection = function () {\n        return this.data.type === internal_1.Utils.normaliseType(internal_1.TreeNodeType.COLLECTION);\n    };\n    TreeNode.prototype.isManifest = function () {\n        return this.data.type === internal_1.Utils.normaliseType(internal_1.TreeNodeType.MANIFEST);\n    };\n    TreeNode.prototype.isRange = function () {\n        return this.data.type === internal_1.Utils.normaliseType(internal_1.TreeNodeType.RANGE);\n    };\n    return TreeNode;\n}());\nexports.TreeNode = TreeNode;\n\n\n//# sourceURL=webpack://manifesto/./src/TreeNode.ts?')},"./src/TreeNodeType.ts":(__unused_webpack_module,exports)=>{"use strict";eval('\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.TreeNodeType = void 0;\nvar TreeNodeType;\n(function (TreeNodeType) {\n    TreeNodeType["COLLECTION"] = "collection";\n    TreeNodeType["MANIFEST"] = "manifest";\n    TreeNodeType["RANGE"] = "range";\n})(TreeNodeType || (exports.TreeNodeType = TreeNodeType = {}));\n\n\n//# sourceURL=webpack://manifesto/./src/TreeNodeType.ts?')},"./src/Utils.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError("Generator is already executing.");\n        while (g && (g = 0, op[0] && (_ = 0)), _) try {\n            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.Utils = void 0;\nvar internal_1 = __webpack_require__(/*! ./internal */ "./src/internal.ts");\nvar dist_commonjs_1 = __webpack_require__(/*! @iiif/vocabulary/dist-commonjs */ "./node_modules/@iiif/vocabulary/dist-commonjs/index.js");\nvar dist_commonjs_2 = __webpack_require__(/*! @edsilv/http-status-codes/dist-commonjs */ "./node_modules/@edsilv/http-status-codes/dist-commonjs/index.js");\n__webpack_require__(/*! isomorphic-unfetch */ "./node_modules/isomorphic-unfetch/index.js");\nvar Utils = /** @class */ (function () {\n    function Utils() {\n    }\n    Utils.getMediaType = function (type) {\n        type = type.toLowerCase();\n        type = type.split(";")[0];\n        return type.trim();\n    };\n    Utils.getImageQuality = function (profile) {\n        if (profile === dist_commonjs_1.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_1 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_1_LEVEL_1 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_1_LEVEL_2 ||\n            profile === dist_commonjs_1.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2) {\n            return "native";\n        }\n        return "default";\n    };\n    Utils.getInexactLocale = function (locale) {\n        if (locale.indexOf("-") !== -1) {\n            return locale.substr(0, locale.indexOf("-"));\n        }\n        return locale;\n    };\n    Utils.getLocalisedValue = function (resource, locale) {\n        // if the resource is not an array of translations, return the string.\n        if (!Array.isArray(resource)) {\n            return resource;\n        }\n        // test for exact match\n        for (var i = 0; i < resource.length; i++) {\n            var value_1 = resource[i];\n            var language_1 = value_1["@language"];\n            if (locale === language_1) {\n                return value_1["@value"];\n            }\n        }\n        // test for inexact match\n        var match = locale.substr(0, locale.indexOf("-"));\n        for (var i = 0; i < resource.length; i++) {\n            var value = resource[i];\n            var language = value["@language"];\n            if (language === match) {\n                return value["@value"];\n            }\n        }\n        return null;\n    };\n    Utils.generateTreeNodeIds = function (treeNode, index) {\n        if (index === void 0) { index = 0; }\n        var id;\n        if (!treeNode.parentNode) {\n            id = "0";\n        }\n        else {\n            id = treeNode.parentNode.id + "-" + index;\n        }\n        treeNode.id = id;\n        for (var i = 0; i < treeNode.nodes.length; i++) {\n            var n = treeNode.nodes[i];\n            Utils.generateTreeNodeIds(n, i);\n        }\n    };\n    Utils.normaliseType = function (type) {\n        type = (type || "").toLowerCase();\n        if (type.indexOf(":") !== -1) {\n            var split = type.split(":");\n            return split[1];\n        }\n        return type;\n    };\n    Utils.normaliseUrl = function (url) {\n        url = url.substr(url.indexOf("://"));\n        if (url.indexOf("#") !== -1) {\n            url = url.split("#")[0];\n        }\n        return url;\n    };\n    Utils.normalisedUrlsMatch = function (url1, url2) {\n        return Utils.normaliseUrl(url1) === Utils.normaliseUrl(url2);\n    };\n    Utils.isImageProfile = function (profile) {\n        if (Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_PROFILE_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_PROFILE_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_PROFILE_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_PROFILE_LEVEL_2)) {\n            return true;\n        }\n        return false;\n    };\n    Utils.isImageServiceType = function (type) {\n        return ((type !== null &&\n            type.toLowerCase() === dist_commonjs_1.ServiceType.IMAGE_SERVICE_2.toLowerCase()) ||\n            type === dist_commonjs_1.ServiceType.IMAGE_SERVICE_3.toLowerCase());\n    };\n    Utils.isLevel0ImageProfile = function (profile) {\n        if (Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_PROFILE_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_LEVEL_0) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_PROFILE_LEVEL_0)) {\n            return true;\n        }\n        return false;\n    };\n    Utils.isLevel1ImageProfile = function (profile) {\n        if (Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_PROFILE_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_LEVEL_1) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_PROFILE_LEVEL_1)) {\n            return true;\n        }\n        return false;\n    };\n    Utils.isLevel2ImageProfile = function (profile) {\n        if (Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_COMPLIANCE_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_COMPLIANCE_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_0_CONFORMANCE_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_CONFORMANCE_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_1_PROFILE_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_LEVEL_2) ||\n            Utils.normalisedUrlsMatch(profile, dist_commonjs_1.ServiceProfile.IMAGE_2_PROFILE_LEVEL_2)) {\n            return true;\n        }\n        return false;\n    };\n    Utils.parseManifest = function (manifest, options) {\n        return internal_1.Deserialiser.parse(manifest, options);\n    };\n    Utils.checkStatus = function (response) {\n        if (response.ok) {\n            return response;\n        }\n        else {\n            var error = new Error(response.statusText);\n            error.response = response;\n            return Promise.reject(error);\n        }\n    };\n    Utils.loadManifest = function (url) {\n        return new Promise(function (resolve, reject) {\n            fetch(url)\n                .then(Utils.checkStatus)\n                .then(function (r) { return r.json(); })\n                .then(function (data) {\n                resolve(data);\n            })\n                .catch(function (err) {\n                reject();\n            });\n        });\n    };\n    Utils.loadExternalResourcesAuth1 = function (resources, openContentProviderInteraction, openTokenService, getStoredAccessToken, userInteractedWithContentProvider, getContentProviderInteraction, handleMovedTemporarily, showOutOfOptionsMessages) {\n        return new Promise(function (resolve, reject) {\n            var promises = resources.map(function (resource) {\n                return Utils.loadExternalResourceAuth1(resource, openContentProviderInteraction, openTokenService, getStoredAccessToken, userInteractedWithContentProvider, getContentProviderInteraction, handleMovedTemporarily, showOutOfOptionsMessages);\n            });\n            Promise.all(promises)\n                .then(function () {\n                resolve(resources);\n            })["catch"](function (error) {\n                reject(error);\n            });\n        });\n    };\n    Utils.loadExternalResourceAuth1 = function (resource, openContentProviderInteraction, openTokenService, getStoredAccessToken, userInteractedWithContentProvider, getContentProviderInteraction, handleMovedTemporarily, showOutOfOptionsMessages) {\n        return __awaiter(this, void 0, void 0, function () {\n            var storedAccessToken;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, getStoredAccessToken(resource)];\n                    case 1:\n                        storedAccessToken = _a.sent();\n                        if (!storedAccessToken) return [3 /*break*/, 6];\n                        return [4 /*yield*/, resource.getData(storedAccessToken)];\n                    case 2:\n                        _a.sent();\n                        if (!(resource.status === dist_commonjs_2.OK)) return [3 /*break*/, 3];\n                        return [2 /*return*/, resource];\n                    case 3: \n                    // the stored token is no good for this resource\n                    return [4 /*yield*/, Utils.doAuthChain(resource, openContentProviderInteraction, openTokenService, userInteractedWithContentProvider, getContentProviderInteraction, handleMovedTemporarily, showOutOfOptionsMessages)];\n                    case 4:\n                        // the stored token is no good for this resource\n                        _a.sent();\n                        _a.label = 5;\n                    case 5:\n                        if (resource.status === dist_commonjs_2.OK || resource.status === dist_commonjs_2.MOVED_TEMPORARILY) {\n                            return [2 /*return*/, resource];\n                        }\n                        throw Utils.createAuthorizationFailedError();\n                    case 6: return [4 /*yield*/, resource.getData()];\n                    case 7:\n                        _a.sent();\n                        if (!(resource.status === dist_commonjs_2.MOVED_TEMPORARILY ||\n                            resource.status === dist_commonjs_2.UNAUTHORIZED)) return [3 /*break*/, 9];\n                        return [4 /*yield*/, Utils.doAuthChain(resource, openContentProviderInteraction, openTokenService, userInteractedWithContentProvider, getContentProviderInteraction, handleMovedTemporarily, showOutOfOptionsMessages)];\n                    case 8:\n                        _a.sent();\n                        _a.label = 9;\n                    case 9:\n                        if (resource.status === dist_commonjs_2.OK || resource.status === dist_commonjs_2.MOVED_TEMPORARILY) {\n                            return [2 /*return*/, resource];\n                        }\n                        throw Utils.createAuthorizationFailedError();\n                }\n            });\n        });\n    };\n    Utils.doAuthChain = function (resource, openContentProviderInteraction, openTokenService, userInteractedWithContentProvider, getContentProviderInteraction, handleMovedTemporarily, showOutOfOptionsMessages) {\n        return __awaiter(this, void 0, void 0, function () {\n            var externalService, kioskService, clickThroughService, loginService, serviceToTry, lastAttempted, kioskInteraction, contentProviderInteraction, contentProviderInteraction;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        // This function enters the flowchart at the < External? > junction\n                        // http://iiif.io/api/auth/1.0/#workflow-from-the-browser-client-perspective\n                        if (!resource.isAccessControlled()) {\n                            return [2 /*return*/, resource]; // no services found\n                        }\n                        externalService = resource.externalService;\n                        if (externalService) {\n                            externalService.options = resource.options;\n                        }\n                        kioskService = resource.kioskService;\n                        if (kioskService) {\n                            kioskService.options = resource.options;\n                        }\n                        clickThroughService = resource.clickThroughService;\n                        if (clickThroughService) {\n                            clickThroughService.options = resource.options;\n                        }\n                        loginService = resource.loginService;\n                        if (loginService) {\n                            loginService.options = resource.options;\n                        }\n                        if (!(!resource.isResponseHandled && resource.status === dist_commonjs_2.MOVED_TEMPORARILY)) return [3 /*break*/, 2];\n                        return [4 /*yield*/, handleMovedTemporarily(resource)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/, resource];\n                    case 2:\n                        serviceToTry = null;\n                        lastAttempted = null;\n                        // repetition of logic is left in these steps for clarity:\n                        // Looking for external pattern\n                        serviceToTry = externalService;\n                        if (!serviceToTry) return [3 /*break*/, 4];\n                        lastAttempted = serviceToTry;\n                        return [4 /*yield*/, Utils.attemptResourceWithToken(resource, openTokenService, serviceToTry)];\n                    case 3:\n                        _a.sent();\n                        return [2 /*return*/, resource];\n                    case 4:\n                        // Looking for kiosk pattern\n                        serviceToTry = kioskService;\n                        if (!serviceToTry) return [3 /*break*/, 7];\n                        lastAttempted = serviceToTry;\n                        kioskInteraction = openContentProviderInteraction(serviceToTry);\n                        if (!kioskInteraction) return [3 /*break*/, 7];\n                        return [4 /*yield*/, userInteractedWithContentProvider(kioskInteraction)];\n                    case 5:\n                        _a.sent();\n                        return [4 /*yield*/, Utils.attemptResourceWithToken(resource, openTokenService, serviceToTry)];\n                    case 6:\n                        _a.sent();\n                        return [2 /*return*/, resource];\n                    case 7:\n                        // The code for the next two patterns is identical (other than the profile name).\n                        // The difference is in the expected behaviour of\n                        //\n                        //    await userInteractedWithContentProvider(contentProviderInteraction);\n                        //\n                        // For clickthrough the opened window should close immediately having established\n                        // a session, whereas for login the user might spend some time entering credentials etc.\n                        // Looking for clickthrough pattern\n                        serviceToTry = clickThroughService;\n                        if (!serviceToTry) return [3 /*break*/, 11];\n                        lastAttempted = serviceToTry;\n                        return [4 /*yield*/, getContentProviderInteraction(resource, serviceToTry)];\n                    case 8:\n                        contentProviderInteraction = _a.sent();\n                        if (!contentProviderInteraction) return [3 /*break*/, 11];\n                        // should close immediately\n                        return [4 /*yield*/, userInteractedWithContentProvider(contentProviderInteraction)];\n                    case 9:\n                        // should close immediately\n                        _a.sent();\n                        return [4 /*yield*/, Utils.attemptResourceWithToken(resource, openTokenService, serviceToTry)];\n                    case 10:\n                        _a.sent();\n                        return [2 /*return*/, resource];\n                    case 11:\n                        // Looking for login pattern\n                        serviceToTry = loginService;\n                        if (!serviceToTry) return [3 /*break*/, 15];\n                        lastAttempted = serviceToTry;\n                        return [4 /*yield*/, getContentProviderInteraction(resource, serviceToTry)];\n                    case 12:\n                        contentProviderInteraction = _a.sent();\n                        if (!contentProviderInteraction) return [3 /*break*/, 15];\n                        // we expect the user to spend some time interacting\n                        return [4 /*yield*/, userInteractedWithContentProvider(contentProviderInteraction)];\n                    case 13:\n                        // we expect the user to spend some time interacting\n                        _a.sent();\n                        return [4 /*yield*/, Utils.attemptResourceWithToken(resource, openTokenService, serviceToTry)];\n                    case 14:\n                        _a.sent();\n                        return [2 /*return*/, resource];\n                    case 15:\n                        // nothing worked! Use the most recently tried service as the source of\n                        // messages to show to the user.\n                        if (lastAttempted) {\n                            showOutOfOptionsMessages(resource, lastAttempted);\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Utils.attemptResourceWithToken = function (resource, openTokenService, authService) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tokenService, tokenMessage;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        tokenService = authService.getService(dist_commonjs_1.ServiceProfile.AUTH_1_TOKEN);\n                        if (!tokenService) return [3 /*break*/, 3];\n                        return [4 /*yield*/, openTokenService(resource, tokenService)];\n                    case 1:\n                        tokenMessage = _a.sent();\n                        if (!(tokenMessage && tokenMessage.accessToken)) return [3 /*break*/, 3];\n                        return [4 /*yield*/, resource.getData(tokenMessage)];\n                    case 2:\n                        _a.sent();\n                        return [2 /*return*/, resource];\n                    case 3: return [2 /*return*/];\n                }\n            });\n        });\n    };\n    Utils.loadExternalResourcesAuth09 = function (resources, tokenStorageStrategy, clickThrough, restricted, login, getAccessToken, storeAccessToken, getStoredAccessToken, handleResourceResponse, options) {\n        return new Promise(function (resolve, reject) {\n            var promises = resources.map(function (resource) {\n                return Utils.loadExternalResourceAuth09(resource, tokenStorageStrategy, clickThrough, restricted, login, getAccessToken, storeAccessToken, getStoredAccessToken, handleResourceResponse, options);\n            });\n            Promise.all(promises)\n                .then(function () {\n                resolve(resources);\n            })["catch"](function (error) {\n                reject(error);\n            });\n        });\n    };\n    // IIIF auth api pre v1.0\n    // Keeping this around for now until the auth 1.0 implementation is stable\n    Utils.loadExternalResourceAuth09 = function (resource, tokenStorageStrategy, clickThrough, restricted, login, getAccessToken, storeAccessToken, getStoredAccessToken, handleResourceResponse, options) {\n        return new Promise(function (resolve, reject) {\n            if (options && options.pessimisticAccessControl) {\n                // pessimistic: access control cookies may have been deleted.\n                // always request the access token for every access controlled info.json request\n                // returned access tokens are not stored, therefore the login window flashes for every request.\n                resource\n                    .getData()\n                    .then(function () {\n                    if (resource.isAccessControlled()) {\n                        // if the resource has a click through service, use that.\n                        if (resource.clickThroughService) {\n                            resolve(clickThrough(resource));\n                            //} else if(resource.restrictedService) {\n                            resolve(restricted(resource));\n                        }\n                        else {\n                            login(resource)\n                                .then(function () {\n                                getAccessToken(resource, true)\n                                    .then(function (token) {\n                                    resource\n                                        .getData(token)\n                                        .then(function () {\n                                        resolve(handleResourceResponse(resource));\n                                    })["catch"](function (message) {\n                                        reject(Utils.createInternalServerError(message));\n                                    });\n                                })["catch"](function (message) {\n                                    reject(Utils.createInternalServerError(message));\n                                });\n                            })["catch"](function (message) {\n                                reject(Utils.createInternalServerError(message));\n                            });\n                        }\n                    }\n                    else {\n                        // this info.json isn\'t access controlled, therefore no need to request an access token.\n                        resolve(resource);\n                    }\n                })["catch"](function (message) {\n                    reject(Utils.createInternalServerError(message));\n                });\n            }\n            else {\n                // optimistic: access control cookies may not have been deleted.\n                // store access tokens to avoid login window flashes.\n                // if cookies are deleted a page refresh is required.\n                // try loading the resource using an access token that matches the info.json domain.\n                // if an access token is found, request the resource using it regardless of whether it is access controlled.\n                getStoredAccessToken(resource, tokenStorageStrategy)\n                    .then(function (storedAccessToken) {\n                    if (storedAccessToken) {\n                        // try using the stored access token\n                        resource\n                            .getData(storedAccessToken)\n                            .then(function () {\n                            // if the info.json loaded using the stored access token\n                            if (resource.status === dist_commonjs_2.OK) {\n                                resolve(handleResourceResponse(resource));\n                            }\n                            else {\n                                // otherwise, load the resource data to determine the correct access control services.\n                                // if access controlled, do login.\n                                Utils.authorize(resource, tokenStorageStrategy, clickThrough, restricted, login, getAccessToken, storeAccessToken, getStoredAccessToken)\n                                    .then(function () {\n                                    resolve(handleResourceResponse(resource));\n                                })["catch"](function (error) {\n                                    // if (resource.restrictedService){\n                                    //     reject(Utils.createRestrictedError());\n                                    // } else {\n                                    reject(Utils.createAuthorizationFailedError());\n                                    //}\n                                });\n                            }\n                        })["catch"](function (error) {\n                            reject(Utils.createAuthorizationFailedError());\n                        });\n                    }\n                    else {\n                        Utils.authorize(resource, tokenStorageStrategy, clickThrough, restricted, login, getAccessToken, storeAccessToken, getStoredAccessToken)\n                            .then(function () {\n                            resolve(handleResourceResponse(resource));\n                        })["catch"](function (error) {\n                            reject(Utils.createAuthorizationFailedError());\n                        });\n                    }\n                })["catch"](function (error) {\n                    reject(Utils.createAuthorizationFailedError());\n                });\n            }\n        });\n    };\n    Utils.createError = function (name, message) {\n        var error = new Error();\n        error.message = message;\n        error.name = String(name);\n        return error;\n    };\n    Utils.createAuthorizationFailedError = function () {\n        return Utils.createError(internal_1.StatusCode.AUTHORIZATION_FAILED, "Authorization failed");\n    };\n    Utils.createRestrictedError = function () {\n        return Utils.createError(internal_1.StatusCode.RESTRICTED, "Restricted");\n    };\n    Utils.createInternalServerError = function (message) {\n        return Utils.createError(internal_1.StatusCode.INTERNAL_SERVER_ERROR, message);\n    };\n    Utils.authorize = function (resource, tokenStorageStrategy, clickThrough, restricted, login, getAccessToken, storeAccessToken, getStoredAccessToken) {\n        return new Promise(function (resolve, reject) {\n            resource.getData().then(function () {\n                if (resource.isAccessControlled()) {\n                    getStoredAccessToken(resource, tokenStorageStrategy)\n                        .then(function (storedAccessToken) {\n                        if (storedAccessToken) {\n                            // try using the stored access token\n                            resource\n                                .getData(storedAccessToken)\n                                .then(function () {\n                                if (resource.status === dist_commonjs_2.OK) {\n                                    resolve(resource); // happy path ended\n                                }\n                                else {\n                                    // the stored token is no good for this resource\n                                    Utils.showAuthInteraction(resource, tokenStorageStrategy, clickThrough, restricted, login, getAccessToken, storeAccessToken, resolve, reject);\n                                }\n                            })["catch"](function (message) {\n                                reject(Utils.createInternalServerError(message));\n                            });\n                        }\n                        else {\n                            // There was no stored token, but the user might have a cookie that will grant a token\n                            getAccessToken(resource, false).then(function (accessToken) {\n                                if (accessToken) {\n                                    storeAccessToken(resource, accessToken, tokenStorageStrategy)\n                                        .then(function () {\n                                        // try using the fresh access token\n                                        resource\n                                            .getData(accessToken)\n                                            .then(function () {\n                                            if (resource.status === dist_commonjs_2.OK) {\n                                                resolve(resource);\n                                            }\n                                            else {\n                                                // User has a token, but it\'s not good enough\n                                                Utils.showAuthInteraction(resource, tokenStorageStrategy, clickThrough, restricted, login, getAccessToken, storeAccessToken, resolve, reject);\n                                            }\n                                        })["catch"](function (message) {\n                                            reject(Utils.createInternalServerError(message));\n                                        });\n                                    })["catch"](function (message) {\n                                        // not able to store access token\n                                        reject(Utils.createInternalServerError(message));\n                                    });\n                                }\n                                else {\n                                    // The user did not have a cookie that granted a token\n                                    Utils.showAuthInteraction(resource, tokenStorageStrategy, clickThrough, restricted, login, getAccessToken, storeAccessToken, resolve, reject);\n                                }\n                            });\n                        }\n                    })["catch"](function (message) {\n                        reject(Utils.createInternalServerError(message));\n                    });\n                }\n                else {\n                    // this info.json isn\'t access controlled, therefore there\'s no need to request an access token\n                    resolve(resource);\n                }\n            });\n        });\n    };\n    Utils.showAuthInteraction = function (resource, tokenStorageStrategy, clickThrough, restricted, login, getAccessToken, storeAccessToken, resolve, reject) {\n        if (resource.status === dist_commonjs_2.MOVED_TEMPORARILY && !resource.isResponseHandled) {\n            // if the resource was redirected to a degraded version\n            // and the response hasn\'t been handled yet.\n            // if the client wishes to trigger a login, set resource.isResponseHandled to true\n            // and call loadExternalResources() again passing the resource.\n            resolve(resource);\n            // } else if (resource.restrictedService) {\n            //     resolve(restricted(resource));\n            //     // TODO: move to next etc\n        }\n        else if (resource.clickThroughService && !resource.isResponseHandled) {\n            // if the resource has a click through service, use that.\n            clickThrough(resource).then(function () {\n                getAccessToken(resource, true)\n                    .then(function (accessToken) {\n                    storeAccessToken(resource, accessToken, tokenStorageStrategy)\n                        .then(function () {\n                        resource\n                            .getData(accessToken)\n                            .then(function () {\n                            resolve(resource);\n                        })["catch"](function (message) {\n                            reject(Utils.createInternalServerError(message));\n                        });\n                    })["catch"](function (message) {\n                        reject(Utils.createInternalServerError(message));\n                    });\n                })["catch"](function (message) {\n                    reject(Utils.createInternalServerError(message));\n                });\n            });\n        }\n        else {\n            // get an access token\n            login(resource).then(function () {\n                getAccessToken(resource, true)\n                    .then(function (accessToken) {\n                    storeAccessToken(resource, accessToken, tokenStorageStrategy)\n                        .then(function () {\n                        resource\n                            .getData(accessToken)\n                            .then(function () {\n                            resolve(resource);\n                        })["catch"](function (message) {\n                            reject(Utils.createInternalServerError(message));\n                        });\n                    })["catch"](function (message) {\n                        reject(Utils.createInternalServerError(message));\n                    });\n                })["catch"](function (message) {\n                    reject(Utils.createInternalServerError(message));\n                });\n            });\n        }\n    };\n    Utils.getService = function (resource, profile) {\n        var services = this.getServices(resource);\n        for (var i = 0; i < services.length; i++) {\n            var service = services[i];\n            if (service.getProfile() === profile) {\n                return service;\n            }\n        }\n        return null;\n    };\n    Utils.getResourceById = function (parentResource, id) {\n        return (Utils.traverseAndFind(parentResource.__jsonld, "@id", id));\n    };\n    /**\n     * Does a depth first traversal of an Object, returning an Object that\n     * matches provided k and v arguments\n     * @example Utils.traverseAndFind({foo: \'bar\'}, \'foo\', \'bar\')\n     */\n    Utils.traverseAndFind = function (object, k, v) {\n        if (object.hasOwnProperty(k) && object[k] === v) {\n            return object;\n        }\n        for (var i = 0; i < Object.keys(object).length; i++) {\n            if (typeof object[Object.keys(object)[i]] === "object") {\n                var o = Utils.traverseAndFind(object[Object.keys(object)[i]], k, v);\n                if (o != null) {\n                    return o;\n                }\n            }\n        }\n        return undefined;\n    };\n    Utils.getServices = function (resource, _a) {\n        var _b = _a === void 0 ? {} : _a, _c = _b.onlyService, onlyService = _c === void 0 ? false : _c, _d = _b.onlyServices, onlyServices = _d === void 0 ? false : _d, _e = _b.skipParentResources, skipParentResources = _e === void 0 ? false : _e;\n        var services = [];\n        // Resources can reference "services" on the manifest. This is a bit of a hack to just get the services from the manifest\n        // too. What would be better is if this was used as a "Map" of full services.\n        // So when you come across { id: \'...\' } without any data, you can "lookup" services from the manifest.\n        // I would have implemented this if I was confident that it was reliable. Instead, I opted for the safest option that\n        // should not break any existing services.\n        if (!skipParentResources &&\n            resource &&\n            resource.options &&\n            resource.options.resource &&\n            resource.options.resource !== resource) {\n            services.push.apply(services, Utils.getServices(resource.options.resource, { onlyServices: true }));\n        }\n        var service = !onlyServices\n            ? (resource.__jsonld || resource).service || []\n            : [];\n        // coerce to array\n        if (!Array.isArray(service)) {\n            service = [service];\n        }\n        if (!onlyService) {\n            // Some resources also have a `.services` property.\n            // https://iiif.io/api/presentation/3.0/#services\n            service.push.apply(service, ((resource.__jsonld || resource).services || []));\n        }\n        if (service.length === 0) {\n            return services;\n        }\n        for (var i = 0; i < service.length; i++) {\n            var s = service[i];\n            if (typeof s === "string") {\n                var r = this.getResourceById(resource.options.resource, s);\n                if (r) {\n                    services.push(new internal_1.Service(r.__jsonld || r, resource.options));\n                }\n            }\n            else {\n                services.push(new internal_1.Service(s, resource.options));\n            }\n        }\n        return services;\n    };\n    Utils.getTemporalComponent = function (target) {\n        var temporal = /t=([^&]+)/g.exec(target);\n        var t = null;\n        if (temporal && temporal[1]) {\n            t = temporal[1].split(",");\n        }\n        return t;\n    };\n    return Utils;\n}());\nexports.Utils = Utils;\n\n\n//# sourceURL=webpack://manifesto/./src/Utils.ts?')},"./src/index.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\nexports.parseManifest = exports.loadManifest = void 0;\n__exportStar(__webpack_require__(/*! ./internal */ "./src/internal.ts"), exports);\nvar Utils_1 = __webpack_require__(/*! ./Utils */ "./src/Utils.ts");\nvar loadManifest = function (url) {\n    return Utils_1.Utils.loadManifest(url);\n};\nexports.loadManifest = loadManifest;\nvar parseManifest = function (manifest, options) {\n    return Utils_1.Utils.parseManifest(manifest, options);\n};\nexports.parseManifest = parseManifest;\n\n\n//# sourceURL=webpack://manifesto/./src/index.ts?')},"./src/internal.ts":function(__unused_webpack_module,exports,__webpack_require__){"use strict";eval('\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, "__esModule", ({ value: true }));\n__exportStar(__webpack_require__(/*! ./JSONLDResource */ "./src/JSONLDResource.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Transform */ "./src/Transform.ts"), exports);\n__exportStar(__webpack_require__(/*! ./ManifestResource */ "./src/ManifestResource.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Resource */ "./src/Resource.ts"), exports);\n__exportStar(__webpack_require__(/*! ./IIIFResource */ "./src/IIIFResource.ts"), exports);\n__exportStar(__webpack_require__(/*! ./SpecificResource */ "./src/SpecificResource.ts"), exports);\n__exportStar(__webpack_require__(/*! ./SpecificResourceForTarget */ "./src/SpecificResourceForTarget.ts"), exports);\n__exportStar(__webpack_require__(/*! ./SpecificResourceForBody */ "./src/SpecificResourceForBody.ts"), exports);\n__exportStar(__webpack_require__(/*! ./AnnotationBody */ "./src/AnnotationBody.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Annotation */ "./src/Annotation.ts"), exports);\n__exportStar(__webpack_require__(/*! ./AnnotationList */ "./src/AnnotationList.ts"), exports);\n__exportStar(__webpack_require__(/*! ./AnnotationPage */ "./src/AnnotationPage.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Canvas */ "./src/Canvas.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Collection */ "./src/Collection.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Duration */ "./src/Duration.ts"), exports);\n__exportStar(__webpack_require__(/*! ./IAccessToken */ "./src/IAccessToken.ts"), exports);\n__exportStar(__webpack_require__(/*! ./IExternalImageResourceData */ "./src/IExternalImageResourceData.ts"), exports);\n__exportStar(__webpack_require__(/*! ./IExternalResource */ "./src/IExternalResource.ts"), exports);\n__exportStar(__webpack_require__(/*! ./IExternalResourceData */ "./src/IExternalResourceData.ts"), exports);\n__exportStar(__webpack_require__(/*! ./IExternalResourceOptions */ "./src/IExternalResourceOptions.ts"), exports);\n__exportStar(__webpack_require__(/*! ./IManifestoOptions */ "./src/IManifestoOptions.ts"), exports);\n__exportStar(__webpack_require__(/*! ./LabelValuePair */ "./src/LabelValuePair.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Language */ "./src/Language.ts"), exports);\n__exportStar(__webpack_require__(/*! ./LanguageMap */ "./src/LanguageMap.ts"), exports);\n__exportStar(__webpack_require__(/*! ./PropertyValue */ "./src/PropertyValue.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Manifest */ "./src/Manifest.ts"), exports);\n__exportStar(__webpack_require__(/*! ./ManifestType */ "./src/ManifestType.ts"), exports);\n__exportStar(__webpack_require__(/*! ./PointSelector */ "./src/PointSelector.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Range */ "./src/Range.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Rendering */ "./src/Rendering.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Scene */ "./src/Scene.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Sequence */ "./src/Sequence.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Serialisation */ "./src/Serialisation.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Service */ "./src/Service.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Size */ "./src/Size.ts"), exports);\n__exportStar(__webpack_require__(/*! ./StatusCode */ "./src/StatusCode.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Thumb */ "./src/Thumb.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Thumbnail */ "./src/Thumbnail.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Transform */ "./src/Transform.ts"), exports);\n__exportStar(__webpack_require__(/*! ./TranslateTransform */ "./src/TranslateTransform.ts"), exports);\n__exportStar(__webpack_require__(/*! ./TransformParser */ "./src/TransformParser.ts"), exports);\n__exportStar(__webpack_require__(/*! ./TreeNode */ "./src/TreeNode.ts"), exports);\n__exportStar(__webpack_require__(/*! ./TreeNodeType */ "./src/TreeNodeType.ts"), exports);\n__exportStar(__webpack_require__(/*! ./Utils */ "./src/Utils.ts"), exports);\n__exportStar(__webpack_require__(/*! ./TranslateTransform */ "./src/TranslateTransform.ts"), exports);\n__exportStar(__webpack_require__(/*! ./RotateTransform */ "./src/RotateTransform.ts"), exports);\n__exportStar(__webpack_require__(/*! ./ScaleTransform */ "./src/ScaleTransform.ts"), exports);\n\n\n//# sourceURL=webpack://manifesto/./src/internal.ts?')},"./node_modules/unfetch/dist/unfetch.module.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (/* export default binding */ __WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ function __WEBPACK_DEFAULT_EXPORT__(e,n){return n=n||{},new Promise(function(t,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(e){return i[e.toLowerCase()]},has:function(e){return e.toLowerCase()in i}}}};for(var l in s.open(n.method||"get",e,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm,function(e,n,t){o.push(n=n.toLowerCase()),u.push([n,t]),i[n]=i[n]?i[n]+","+t:t}),t(a())},s.onerror=r,s.withCredentials="include"==n.credentials,n.headers)s.setRequestHeader(l,n.headers[l]);s.send(n.body||null)})}\n//# sourceMappingURL=unfetch.module.js.map\n\n\n//# sourceURL=webpack://manifesto/./node_modules/unfetch/dist/unfetch.module.js?')},"node-fetch":e=>{"use strict";e.exports=__WEBPACK_EXTERNAL_MODULE_node_fetch__}},__webpack_module_cache__={},leafPrototypes,getProto;function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(t.exports,t,t.exports,__webpack_require__),t.exports}getProto=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,__webpack_require__.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var t=Object.create(null);__webpack_require__.r(t);var r={};leafPrototypes=leafPrototypes||[null,getProto({}),getProto([]),getProto(getProto)];for(var o=2&n&&e;"object"==typeof o&&!~leafPrototypes.indexOf(o);o=getProto(o))Object.getOwnPropertyNames(o).forEach((n=>r[n]=()=>e[n]));return r.default=()=>e,__webpack_require__.d(t,r),t},__webpack_require__.d=(e,n)=>{for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/index.ts");return __webpack_exports__})()));